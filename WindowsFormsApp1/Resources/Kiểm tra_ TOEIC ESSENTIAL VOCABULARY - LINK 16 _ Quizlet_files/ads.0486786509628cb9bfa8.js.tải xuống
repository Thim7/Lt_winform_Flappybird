(self.webpackChunkquizlet=self.webpackChunkquizlet||[]).push([["ads"],{"./app/j/ads/AdsSizes.ts":(e,t,i)=>{"use strict";i.d(t,{xN:()=>l,Dm:()=>R,kd:()=>P,fO:()=>y});i("./node_modules/core-js/modules/es.array.iterator.js"),i("./node_modules/core-js/modules/web.dom-collections.iterator.js"),i("./node_modules/core-js/modules/es.array.sort.js");var s=i("./app/j/ads/enums/AdsNames.ts"),a=i("./app/j/ads/enums/AdsTypes.ts"),r=i("./app/j/ads/utils/screenSizes.ts"),d=i("./node_modules/invariant/browser.js"),n=i.n(d),o={ad1x1:[1,1],ad81x31:[81,31],ad120x240:[120,240],ad120x600:[120,600],ad160x600:[160,600],ad180x150:[180,150],ad234x60:[234,60],ad250x250:[250,250],ad300x50:[300,50],ad300x100:[300,100],ad300x250:[300,250],ad300x600:[300,600],ad320x50:[320,50],ad320x100:[320,100],ad336x280:[336,280],ad426x240:[426,240],ad468x60:[468,60],ad640x360:[640,360],ad728x90:[728,90],ad970x90:[970,90],ad970x250:[970,250],fluid:"fluid"},l={ad300x250v:[300,250],ad300x600v:[300,600],ad400x300v:[400,300],ad480x270v:[480,270],ad640x360v:[640,360]},g=[],h={[a.D.BANNER]:[o.ad728x90],[a.D.MOBILE_HORIZONTAL_STRIP]:[o.ad320x50],[a.D.NATIVE]:[o.fluid],[a.D.MOBILE_RECTANGLE]:[o.ad320x50],[a.D.RECTANGLE]:[o.ad300x250],[a.D.SIDEBAR]:[o.ad160x600]},u=(a.D.BANNER,l.ad480x270v,a.D.RECTANGLE,l.ad400x300v,a.D.SIDEBAR,l.ad300x600v,a.D.VIDEO,l.ad400x300v,a.D.RECTANGLE,a.D.SIDEBAR,a.D.VIDEO,{[a.D.BANNER]:[[r.r.medium,[o.ad728x90]],[r.r.remaining,g]],[a.D.MOBILE_HORIZONTAL_STRIP]:[[r.r.medium,g],[r.r.remaining,[o.ad320x50]]],[a.D.MOBILE_RECTANGLE]:[[r.r.medium,g],[r.r.remaining,[o.ad300x250]]],[a.D.NATIVE]:[[r.r.remaining,[o.fluid]]],[a.D.RECTANGLE]:[[r.r.medium,[o.ad300x250]],[r.r.remaining,g]],[a.D.SIDEBAR]:[[r.r.medium,[o.ad160x600]],[r.r.remaining,g]]}),c={[a.D.SIDEBAR]:[[r.r.large,[o.ad120x600,o.ad160x600,o.ad250x250,o.ad300x250,o.ad300x600]],[r.r.medium,[o.ad120x600,o.ad160x600]],[r.r.remaining,g]]},p=[[r.r.medium,g],[r.r.small,[o.ad300x50,o.ad300x250,o.ad320x50,o.ad468x60]],[r.r.remaining,[o.ad250x250,o.ad300x50,o.ad300x250,o.ad320x50]]],E=[[r.r.medium,g],[r.r.small,[o.ad300x50,o.ad300x250,o.ad320x50,o.ad426x240,o.ad468x60]],[r.r.remaining,[o.ad250x250,o.ad300x50,o.ad300x250,o.ad320x50]]],f=[[r.r.veryLarge,[o.ad320x100,o.ad468x60,o.ad728x90]],[r.r.large,[o.ad300x50,o.ad320x100,o.ad468x60]],[r.r.medium,[o.ad300x50,o.ad320x100,o.ad468x60]],[r.r.remaining,g]],m=[[r.r.veryLarge,[o.ad640x360,o.ad728x90]],[r.r.large,[o.ad300x50,o.ad320x100,o.ad468x60,o.ad640x360]],[r.r.medium,[o.ad300x50,o.ad320x100,o.ad426x240,o.ad468x60]],[r.r.remaining,g]],_=[[r.r.veryLarge,[o.ad728x90]],[r.r.large,[o.ad640x360]],[r.r.medium,[o.ad300x250,o.ad320x50]],[r.r.remaining,g]],A=[[r.r.medium,g],[r.r.tiny,[o.ad320x50,o.ad300x250]],[r.r.remaining,g]],v=[[r.r.veryLarge,[o.ad120x600,o.ad160x600,o.ad250x250,o.ad300x250,o.ad300x600]],[r.r.large,[o.ad120x600,o.ad160x600]],[r.r.remaining,g]],T=e=>e.map((e=>{var[t,i]=e;return i===g?[t,i]:[t,[o.fluid,...i]]})),S={[s.h.CLASS_DASHBOARD_EMBEDDED_01]:[[r.r.veryLarge,[o.fluid,o.ad468x60]],[r.r.large,[o.fluid,o.ad320x50]],[r.r.medium,[o.fluid,o.ad320x50,o.ad300x250]],[r.r.remaining,g]],[s.h.CLASS_DASHBOARD_EMBEDDED_02]:[[r.r.veryLarge,[o.ad468x60]],[r.r.large,[o.ad320x50]],[r.r.medium,[o.ad320x50,o.ad300x250]],[r.r.remaining,g]],[s.h.CLASS_DASHBOARD_EMBEDDED_MWEB_01]:[[r.r.medium,g],[r.r.small,[o.fluid,o.ad320x50,o.ad300x250]],[r.r.verySmall,[o.fluid,o.ad320x50,o.ad300x250]],[r.r.tiny,[o.fluid,o.ad300x250]],[r.r.remaining,g]],[s.h.CLASS_DASHBOARD_EMBEDDED_MWEB_02]:[[r.r.medium,g],[r.r.small,[o.ad320x50,o.ad300x250]],[r.r.verySmall,[o.ad320x50,o.ad300x250]],[r.r.tiny,[o.ad300x250]],[r.r.remaining,g]],[s.h.CLASS_DASHBOARD_SIDEBAR]:v,[s.h.CREATE_SET_HEADER]:[[r.r.veryLarge,[o.ad728x90,o.ad468x60,o.ad320x50,o.ad234x60]],[r.r.large,[o.ad468x60,o.ad320x50,o.ad234x60]],[r.r.medium,[o.ad320x50,o.ad234x60]],[r.r.remaining,g]],[s.h.EXPLANATIONS_EXERCISE_EMBED_DESKTOP_01]:[[r.r.veryLarge,[o.fluid,o.ad970x250,o.ad728x90,o.ad640x360]],[r.r.large,[o.fluid,o.ad300x250,o.ad320x50]],[r.r.medium,[o.fluid,o.ad300x250,o.ad320x50]],[r.r.remaining,g]],[s.h.EXPLANATIONS_EXERCISE_EMBED_MWEB_01]:[[r.r.medium,g],[r.r.tiny,[o.fluid,o.ad320x50,o.ad300x250]],[r.r.remaining,g]],[s.h.EXPLANATIONS_EXERCISE_SIDEBAR]:[[r.r.large,[o.ad300x600,o.ad300x250]],[r.r.medium,[o.ad160x600]],[r.r.remaining,g]],[s.h.EXPLANATIONS_QUESTION_SIDEBAR]:[[r.r.large,[o.ad300x600,o.ad300x250]],[r.r.medium,[o.ad160x600]],[r.r.remaining,g]],[s.h.EXPLANATIONS_QUESTION_EMBED_DESKTOP_01]:[[r.r.veryLarge,[o.fluid,o.ad728x90,o.ad640x360]],[r.r.large,[o.fluid,o.ad300x250,o.ad320x50]],[r.r.medium,[o.fluid,o.ad300x250,o.ad320x50]],[r.r.remaining,g]],[s.h.EXPLANATIONS_QUESTION_EMBED_MWEB_01]:[[r.r.medium,g],[r.r.tiny,[o.fluid,o.ad320x50,o.ad300x250]],[r.r.remaining,g]],[s.h.EXPLANATIONS_TEXTBOOK_SIDEBAR]:[[r.r.large,[o.ad300x600,o.ad300x250]],[r.r.medium,[o.ad160x600]],[r.r.remaining,g]],[s.h.EXPLANATIONS_TEXTBOOK_EMBED_DESKTOP_01]:[[r.r.veryLarge,[o.fluid,o.ad728x90,o.ad640x360]],[r.r.large,[o.fluid,o.ad640x360]],[r.r.medium,[o.fluid,o.ad300x250,o.ad320x50]],[r.r.remaining,g]],[s.h.EXPLANATIONS_TEXTBOOK_EMBED_DESKTOP_02]:_,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_DESKTOP_03]:_,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_DESKTOP_04]:_,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_DESKTOP_05]:_,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_DESKTOP_06]:_,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_MWEB_01]:[[r.r.medium,g],[r.r.tiny,[o.fluid,o.ad320x50,o.ad300x250]],[r.r.remaining,g]],[s.h.EXPLANATIONS_TEXTBOOK_EMBED_MWEB_02]:A,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_MWEB_03]:A,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_MWEB_04]:A,[s.h.EXPLANATIONS_TEXTBOOK_EMBED_MWEB_05]:A,[s.h.FOLDER_SIDEBAR]:v,[s.h.HOMEPAGE_MWEB_EMBEDDED]:[[r.r.large,g],[r.r.remaining,[o.ad320x50]]],[s.h.HOMEPAGE_SIDEBAR]:v,[s.h.MATCH_MWEB]:[[r.r.medium,g],[r.r.remaining,[o.ad300x250]]],[s.h.LEADERBOARD_MWEB]:[[r.r.medium,g],[r.r.remaining,[o.ad320x50]]],[s.h.PROFILE_SIDEBAR]:v,[s.h.SEARCH_EMBED_DESKTOP_01]:[[r.r.veryLarge,[o.fluid,o.ad640x360,o.ad728x90]],[r.r.large,[o.fluid,o.ad300x50,o.ad320x100,o.ad468x60,o.ad640x360]],[r.r.medium,[o.fluid,o.ad300x50,o.ad320x100,o.ad468x60,o.ad426x240]],[r.r.remaining,g]],[s.h.SEARCH_EMBED_DESKTOP_02]:[[r.r.veryLarge,[o.ad728x90]],[r.r.large,[o.ad300x50,o.ad320x100,o.ad468x60]],[r.r.medium,[o.ad300x50,o.ad320x100,o.ad468x60]],[r.r.remaining,g]],[s.h.SEARCH_FOOTER]:[[r.r.large,[o.ad728x90]],[r.r.medium,[o.ad468x60]],[r.r.remaining,[o.ad320x50]]],[s.h.SEARCH_MOBILE_WEB_RECTANGLE]:[[r.r.medium,g],[r.r.small,[o.fluid,o.ad300x250,o.ad320x50,o.ad468x60,o.ad426x240]],[r.r.verySmall,[o.fluid,o.ad300x250,o.ad320x50]],[r.r.remaining,g]],[s.h.SEARCH_MOBILE_WEB_RECTANGLE_BOTTOM]:[[r.r.medium,g],[r.r.small,[o.ad300x250,o.ad320x50,o.ad468x60]],[r.r.verySmall,[o.ad300x250,o.ad320x50]],[r.r.remaining,g]],[s.h.SEARCH_SIDEBAR]:[[r.r.veryLarge,[o.ad120x600,o.ad160x600]],[r.r.large,[o.ad120x600,o.ad160x600]],[r.r.medium,[o.ad120x600,o.ad160x600]],[r.r.remaining,g]],[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_01]:T(m),[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_02]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_03]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_04]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_05]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_06]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_07]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_08]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_09]:f,[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_10]:f,[s.h.SET_PAGE_EMBED_MWEB_MULTI_01]:T(E),[s.h.SET_PAGE_EMBED_MWEB_MULTI_02]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_03]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_04]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_05]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_06]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_07]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_08]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_09]:p,[s.h.SET_PAGE_EMBED_MWEB_MULTI_10]:p,[s.h.SET_PAGE_STICKY_AD_MWEB]:[[r.r.medium,[o.noAd]],[r.r.remaining,[o.ad320x50]]],[s.h.SET_PAGE_FOOTER]:[[r.r.large,[o.ad970x250,o.ad970x90,o.ad728x90]],[r.r.medium,[o.ad728x90]],[r.r.small,[o.ad468x60]],[r.r.remaining,[o.ad320x50]]],[s.h.SET_SIDEBAR_V4]:[[r.r.largeAndTall,[o.ad120x600,o.ad160x600,o.ad250x250,o.ad300x250,o.ad300x600]],[r.r.large,[o.ad300x250]],[r.r.medium,[o.ad120x600,o.ad160x600]],[r.r.remaining,g]],[s.h.SPELL_MWEB_FOOTER]:[[r.r.medium,g],[r.r.remaining,[o.ad320x50]]],[s.h.STUDY_MODE_AD]:[[r.r.mediumAndVeryTall,[o.fluid,o.ad300x600,o.ad300x250,o.ad640x360]],[r.r.medium,[o.fluid,o.ad300x600,o.ad300x250,o.ad640x360]],[r.r.tiny,[o.fluid,o.ad300x250]],[r.r.remaining,g]],[s.h.TEST_MWEB]:[[r.r.medium,g],[r.r.remaining,[o.ad320x50]]],[s.h.TEST_STUDY_MODE_AD]:[[r.r.large,[o.fluid,o.ad728x90,o.ad640x360]],[r.r.medium,[o.fluid,o.ad640x360]],[r.r.remaining,[o.ad320x50]]],[s.h.WRITE_MWEB]:[[r.r.medium,g],[r.r.remaining,[o.ad320x50]]]},b={[s.h.SET_MWEB_STRIP_V3]:[[r.r.medium,g],[r.r.remaining,[o.ad320x50]]],[s.h.SET_PAGE_EMBED_DESKTOP_MULTI_01]:[[r.r.veryLarge,[o.fluid,o.ad320x100,o.ad468x60,o.ad728x90]],[r.r.large,[o.fluid,o.ad300x50,o.ad320x100,o.ad468x60]],[r.r.medium,[o.fluid,o.ad300x50,o.ad320x100,o.ad468x60]],[r.r.remaining,g]],[s.h.SET_PAGE_EMBED_MWEB_MULTI_01]:[[r.r.medium,g],[r.r.small,[o.fluid,o.ad300x50,o.ad300x250,o.ad320x50,o.ad468x60]],[r.r.remaining,[o.fluid,o.ad250x250,o.ad300x250,o.ad320x50]]],[s.h.SET_SIDEBAR_V4]:[[r.r.large,[o.ad120x600,o.ad160x600,o.ad250x250,o.ad300x250,o.ad300x600]],[r.r.medium,[o.ad120x600,o.ad160x600]],[r.r.remaining,g]]};function R(e){var t=h[e];return n()(t,"Size map should be available"),t}function P(e,t){if(void 0===t&&(t={type:a.D.SIDEBAR,isBCS:!1,isFlexible:!1,noVariant:!1}),t.isBCS){var i=b[e];if(i)return i}if(t.isFlexible){var s=S[e];if(s)return s;var r=c[t.type];if(r)return r}var d=u[t.type];return n()(d,"Size map should be available"),d}function y(e,t,i){return void 0===t&&(t={type:a.D.SIDEBAR,isBCS:!1,isFlexible:!1,noVariant:!1}),P(e,t).filter((e=>{var[[t,s]]=e;return t<=i.width&&s<=i.height})).sort(((e,t)=>{var[[i,s]]=e,[[a,r]]=t;return i<a?1:i>a?-1:s<r?1:s>r?-1:0})).slice(0,1)}},"./app/j/ads/ads.entry.tsx":(e,t,i)=>{"use strict";var s,a=i("./app/j/ab_tests/QMeasure.ts"),r=i("./app/j/ads/adsGlobals.ts"),d=(i("./node_modules/core-js/modules/es.object.assign.js"),i("./app/j/ads/AdsHelper.ts")),n=i("./node_modules/lodash/nth.js"),o=i.n(n),l=i("./node_modules/lodash/groupBy.js"),g=i.n(l),h=i("./node_modules/lodash/defaultTo.js"),u=i.n(h),c=(i("./node_modules/core-js/modules/es.array.iterator.js"),i("./node_modules/core-js/modules/web.dom-collections.iterator.js"),i("./node_modules/core-js/modules/es.regexp.to-string.js"),i("./node_modules/core-js/modules/es.string.starts-with.js"),i("./node_modules/core-js/modules/es.string.includes.js"),i("./node_modules/core-js/modules/es.json.stringify.js"),i("./node_modules/core-js/modules/es.regexp.exec.js"),i("./node_modules/core-js/modules/es.string.replace.js"),i("./node_modules/core-js/modules/es.parse-int.js"),i("./node_modules/core-js/modules/es.object.entries.js"),i("./node_modules/core-js/modules/es.array.reduce.js"),i("./node_modules/core-js/modules/es.string.search.js"),i("./node_modules/core-js/modules/es.object.values.js"),i("./node_modules/core-js/modules/es.array.sort.js"),i("./app/j/ads/AdsSizes.ts"));!function(e){e.AD_TEST_ENABLED="dbgate",e.AD_REFRESH_COUNT="arc",e.AD_REFRESH_COUNT_BUCKETS="ref",e.AGE="a",e.AGE_RANGE="g",e.AGE_RANGE_PREDICTED="gp",e.AUDIENCE="au",e.CAMPAIGN="campaign",e.CHILD_DIRECTED="childDirected",e.CONTENT_CATEGORY_CERTIFICATION_LEVEL_1="ct_level1_cert",e.CONTENT_CATEGORY_CERTIFICATION_LEVEL_2="ct_level2_cert",e.CONTENT_CATEGORY_CERTIFICATION_LEVEL_3="ct_level3_cert",e.CONTENT_CATEGORY_CERTIFICATION_LEVEL_4="ct_level4_cert",e.CONTENT_CATEGORY_CERTIFICATION_LEVEL_5="ct_level5_cert",e.CONTENT_CATEGORY_LEVEL_1="ct_level1",e.CONTENT_CATEGORY_LEVEL_2="ct_level2",e.CONTENT_CATEGORY_LEVEL_3="ct_level3",e.CONTENT_CATEGORY_LEVEL_4="ct_level4",e.CONTENT_CATEGORY_LEVEL_5="ct_level5",e.CONTENT_CATEGORY_LEVEL_6="ct_level6",e.FRIENDLY_IFRAME="fifr",e.GRADE_LEVELS="gl",e.IS_ELIGIBLE_FOR_FREE_TRIAL="iefft",e.IS_FIRST_LOGGED_IN_SESSION="f",e.IS_PARENT="par",e.IS_TEACHER="t",e.LOCALE="n",e.LOGGED_IN_STATUS="l",e.MARKETPLACE_HOUSE_ADS="mad",e.MODERNIZE_STUDY_MODES="msm",e.ONE_TRUST="one_trust",e.ONE_TRUST_TRACK="ot",e.PAGE_ACTION="pa",e.PAGE_DEPTH="pd",e.PLACEHOLDER_ADS_ENABLED="dbgpae",e.PLATFORM="p",e.PROSEMIRROR_BUNDLE_PERF_TEST="pbpt",e.PWT_VERSION_ID="pwtverid",e.RANDOM_PAGE_VIEW="rpv",e.REQUESTED_WITHOUT_BIDS="rwb",e.RESIZE="rsz",e.SCREEN_HEIGHT="sh",e.SCREEN_WIDTH="sw",e.SEARCH_RESULT_DESKTOP_TEST="srp_embed",e.SET_ID="set_id",e.SET_TERMS_COUNT="stc",e.TEACHER_CREATED_SET="tcs",e.TESTING_VARIABLES="testing_variables",e.UPGRADE_EXPIRATION_DATE_RANGE="rd",e.UPGRADE_TYPE="u",e.VERSION="v",e.OW_SCREEN_HEIGHT="sh",e.OW_SCREEN_WIDTH="sw"}(s||(s={}));var p,E=i("./app/j/ads/types.ts"),f=i("./app/j/constants/TimeConstants.ts"),m=60*f.sU,_=e=>{var t=e.indexOf("upr");if(!(-1!==t))return{enabled:!1};var i=e.substr(t+3,3);return{enabled:!0,minUSUPRFloor:(()=>{switch(i){case"05c":return.05;case"10c":return.1;case"15c":return.15;case"20c":return.2;case"25c":return.25;case"30c":return.3;default:return 0}})()}},A=e=>{var t=e.indexOf("Ow");if(!(-1!==t))return{enabled:!1};var i=e.substr(t+2);return{enabled:!0,mult:(()=>{switch(i){case"Quarterx":return.25;case"Halfx":return.5;default:return 1;case"2x":return 2}})()}},v=e=>({partners:{adX:_(e),openWrap:A(e)},staticMultiplier:1,floors:{geoc_mult:{us:1,ca:.6,gb:.25,au:.57,se:.18,jp:.22,ch:.56,in:.13,mx:.18,ru:.12,kr:.2,fr:.22,ae:.6,nl:.2,de:.31,es:.15,sg:.4,other:.07}}}),T=(e,t,i)=>{var s,a,r,d="pubmaticServer"===i?"pubmatic":i;return null!=(s=null==e||null==(a=e.base_floors)||null==(r=a[t])?void 0:r[d])?s:.1},S=(e,t)=>{var i,s;return null!=(i=null==e||null==(s=e.bn_mult)?void 0:s[t])?i:1},b=(e,t)=>{var i,s,a=null==e?void 0:e.geoc_mult;return null!=(i=null!=(s=null==a?void 0:a[t])?s:null==a?void 0:a.other)?i:1},R=(e,t)=>{var i,s;if(t<1)return 1;var a=Math.min(Math.round(t),20);return null!=(i=null==e||null==(s=e.pd_mult)?void 0:s[a])?i:1},P=(e,t)=>{var i,s,a=Math.min(t,20);return null!=(i=null==e||null==(s=e.ref_mult)?void 0:s[a])?i:1},y=e=>{var t,i,s=(new Date).getUTCHours();return null!=(t=null==e||null==(i=e.hod_mult)?void 0:i[s])?t:1},O=e=>{var t,i,s=(new Date).getUTCDay();return 0===s&&(s=7),null!=(t=null==e||null==(i=e.dow_mult)?void 0:i[s])?t:1},D=e=>Math.round(100*e+Number.EPSILON)/100,C=(e,t,i,s,a)=>{var r=a*P(e,s),d=T(e,t,i);return D(d*r)},B=(e,t,i,s,a,r,d)=>{var n="control"!==d?((e,t,i)=>{var s,a,r,d;return null!=(s=null==(a=e.decisioning)||null==(r=a[i])||null==(d=r[t])?void 0:d.cpm_sum_per_1000_imps)?s:"control"})(e,t,d):r,o=v(n);return o.floors=e,o.staticMultiplier=((e,t,i,s)=>{for(var a=[R(e,t),b(e,i),S(e,s),y(e),O(e)],r=1,d=0;d<a.length;d++)r*=a[d];return r})(e,a,s,i),o},I=["33across","aol","nobid","onedisplay","onemobile","verizon"],x=e=>(t,i)=>(i[e]=t,i),M=x("bidFloor"),L={appnexus:x("reserve"),districtmDMX:x("floor"),ix:(e,t)=>(t.bidFloorCur="USD",x("bidFloor")(e,t)),onedisplay:M,onemobile:M,openx:x("customFloor"),pubmatic:(e,t)=>x("kadfloor")(""+D(e),t),pubmaticServer:(e,t)=>x("kadfloor")(""+D(e),t),smartadserver:x("bidfloor"),sonobi:x("floor"),sovrn:x("bidfloor"),triplelift:x("floor")},w=(e,t,i,s,a)=>{a.forEach((a=>{var r="function"==typeof s?s(a.code):s,d=P(e,r),n=t*d;a.bids=a.bids.map(((e,t,i,s)=>a=>{var r=L[a.bidder];return void 0===r||(a.params=r(D(T(e,s,a.bidder)*i*t),a.params)),a})(e,n,i,a.code))}))},W={};!function(e){e.BID_RECEIVED="HookForBidReceived",e.PREBID_SET_CONFIG="HookForPrebidSetConfig",e.PREBID_REQUEST_BIDS="HookForPrebidRequestBids",e.JS_LOADED="jsLoaded"}(p||(p={}));var k,N=function(e,t,i,s){void 0===s&&(s=!1);var a=s?null:e[t];e[t]=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];null==a||a(...t),i(...t)}},j=(e,t,i,s)=>{N(e,p.BID_RECEIVED,((e,a)=>{((e,t)=>{var i=t.adUnitCode.replace("dfp-","");t.ad.length&&!(e=>"teads"!==e.bidder&&("triplelift"!==e.bidder||"tlx"!==e.tl_source))(t)&&i in W&&W[i].add(t.ad)})(0,a),((e,t,i)=>{var s=t.floors,a=t.staticMultiplier;if(t.partners.openWrap.enabled&&!(e.cpm<=0)&&s&&!I.includes(e.bidder)){var r=(0,d.RK)(i,e.adUnitCode,E.HS.PostAuction),n=C(s,e.adUnitCode,e.bidder,r,a);e._requestFloor=n,e._requestFloorRespected=e.cpm>=n}})(a,t(),s._winningBids),i&&s.logOpenWrapBid(a)}))},V=(e,t)=>{N(e,p.PREBID_REQUEST_BIDS,(e=>{((e,t)=>{var i=e.keyValues[s.GRADE_LEVELS],a=e.keyValues[s.IS_TEACHER];(i||a)&&t.forEach((e=>{e.bids=e.bids.map((e=>("appnexus"===e.bidder&&(e.params.keywords=e.params.keywords||{},e.params.keywords[s.GRADE_LEVELS]=i),"onemobile"===e.bidder&&(e.params.ext=e.params.ext||{},e.params.ext[s.IS_TEACHER]=a),e)))}))})(t,e)}))},F=(e,t)=>{N(e,p.JS_LOADED,t)},H=i("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");i("./node_modules/core-js/modules/es.promise.js"),i("./node_modules/core-js/modules/es.array.flat.js"),i("./node_modules/core-js/modules/es.array.unscopables.flat.js");!function(e){e.A9="A9",e.PWT="PWT"}(k||(k={}));var Z=i("./node_modules/nullthrows/nullthrows.js"),G=i.n(Z),z=i("./app/j/utils/tamperProofNow.ts"),K=k.A9,U={name:K,timeoutMs:1300,init(e,t,i){if(!r.Z.apstag){var s=[];r.Z.apstag={init(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.push(["i",t])},fetchBids(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s.push(["f",t])},setDisplayBids(){},targetingKeys:()=>[],_Q:s}}i||r.Z.apstag.init({adServer:"googletag",bidTimeout:t,deals:!0,pubID:e,simplerGPT:!1})},fetchBids(e){return new Promise(((t,i)=>{var s=setTimeout((()=>{t([])}),this.timeoutMs),a=G()(r.Z.apstag,"Should have the apstag library to fetch bids"),d=e.filter((e=>{var t,i;return(null!=(t=null==(i=e.disabledBidders)?void 0:i.indexOf(K))?t:-1)<0})).map((e=>({sizes:e.sizes,slotID:e.adUnitCode,slotName:e.name})));d.length<1?t([]):a.fetchBids({slots:d,timeout:this.timeoutMs-50},(a=>{var r=a.filter((e=>{var t,i=e.targeting||{amzniid:""},s=i.amzniid||i.amzniid_sp||i.r_amzniid;return(null!=(t=null==s?void 0:s.length)?t:0)>0})).map((t=>{var a=t.slotID,r=e.filter((e=>e.adUnitCode===a));1!==r.length&&(clearTimeout(s),i(new Error("a9Bidder::fetchBids: None or more than 1 config matching response")));var d=r[0];return{adsSizes:d.sizes,bidder:K,lastFetchedTimestamp:(0,z.Z)(),name:d.name,targeting:t.targeting}}));clearTimeout(s),t(r)}))}))},applyBid:(e,t)=>{Object.keys(t.targeting).forEach((i=>{if(i.includes("amzn")){var s=t.targeting[i];e.setTargeting(i,s)}}))}},Q=k.PWT,q=!1,X=[],Y={name:Q,timeoutMs:1300,init(e,t,i){if(!r.Z.PWT){var s=[];r.Z.PWT={addKeyValuePairsToGPTSlots(){},generateConfForGPT(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.push(["g",t]),[]},jsLoaded(){},removeKeyValuePairsFromGPTSlots(){},requestBids(){},mockPWT(){},bidMap:{}}}var n,o,l,g;r.Z.PWT.mockPWT?"experiment"===a.Z.peekAtVariation("RemoveAdsQWaitQLoadDependency[default,ads]")&&F(r.Z.PWT,(()=>{q=!0,X.forEach((e=>e()))})):q=!0;n=r.Z.PWT,o=t,l=e=>(0,d.RK)(i._winningBids,e,E.HS.PreAuction),void 0===(g=!0)&&(g=!1),((e,t,i)=>{var s=t?null:e.HookForPrebidRequestBids;e.HookForPrebidRequestBids=e=>{s&&s(e),i(e)}})(n,g,(e=>{var t,i="function"==typeof o?o():o;i.partners.openWrap.enabled&&w(i.floors,i.staticMultiplier,null!=(t=i.partners.openWrap.mult)?t:1,l,e)})),V(r.Z.PWT,e),j(r.Z.PWT,t,e.shouldLogOWReceivedBids||!1,i)},fetchBids(e){return new Promise(((t,i)=>{var d=setTimeout((()=>{t([])}),this.timeoutMs),n=()=>{var a=G()(r.Z.PWT,"Should have the PWT library to fetch bids");e.forEach((e=>{var t;t=e.name,W[t]=new Set}));var n=e.filter((e=>{var t,i;return(null!=(t=null==(i=e.disabledBidders)?void 0:i.indexOf(Q))?t:-1)<0})).map((e=>{var t=e.sizes.filter((e=>"fluid"!==e));return{adUnitId:e.adUnitCode,adUnitIndex:e.index,code:e.divID,divId:e.divID,mediaTypes:{banner:{sizes:t}},sizes:t}}));n.length<1?t([]):a.requestBids(n,(a=>{var r=a.filter((e=>{var t;return Object.keys(null==(t=e.bidData)?void 0:t.kvp).length>0})).map((t=>{var a,r=t.adUnitId,n=e.filter((e=>e.adUnitCode===r));1!==n.length&&(clearTimeout(d),i(new Error("pwtBidder::fetchBids: None or more than 1 config matching response")));var o=n[0],l=o.name,g=null==(a=t.bidData.wb)?void 0:a.adHtml,h=t.bidData.kvp;return g&&((e,t)=>{var i;return(null==W||null==(i=W[e])?void 0:i.has(t))||!1})(l,g)&&(h[s.FRIENDLY_IFRAME]="1"),{adsSizes:o.sizes,bidder:Q,lastFetchedTimestamp:(0,z.Z)(),name:l,targeting:h}}));clearTimeout(d),t(r)}))};!("experiment"===a.Z.peekAtVariation("RemoveAdsQWaitQLoadDependency[default,ads]"))||q?n():X.push(n)}))},applyBid:(e,t)=>{Object.keys(t.targeting).forEach((i=>{if(i.includes("pwt")||i.includes("fifr")){var s=t.targeting[i];e.setTargeting(i,s)}}))}},J=Y,$=i("./app/j/config/constants.ts"),ee=i("./node_modules/uuid/dist/esm-browser/v4.js");class te{constructor(){this._bidders={},this._bids={}}static getCurrentAid(e){return te._eleIdToCurrentAid[e]||null}setup(e,t,i,s){this._bidders={},this._bidManagerConfig=s,!s.disableA9&&s.a9PubId&&s.a9Timeout&&(U.init(s.a9PubId,s.a9Timeout,s.didPhpAdsRender),this._bidders[U.name]=U),s.disablePWT||(J.init(e,t,i),this._bidders[J.name]=J),this._waitingBidsMap=new Map}fetchAllBids(e,t){var i=this;return(0,H.Z)((function*(){var s=[],[a,r]=(0,d.EQ)(),n=[];Object.entries(e).forEach(((e,t)=>{var[o,l]=e;n.push(o),i.initWaitCallback(o);var g={name:o,adUnitCode:"/"+$.HW+"/"+o,index:""+t,divID:(0,d.tI)(o),sizes:(0,c.fO)(o,l,{height:r,width:a})[0][1]};te._eleIdToCurrentAid[(0,d.tI)(o)]=(0,ee.Z)();var h=[];l.useHeaderBidding||h.push(k.A9),l.usePWTBidding||h.push(k.PWT),h.length&&(g.disabledBidders=h),s.push(g)}));var o=[];for(var l of Object.values(i._bidders))o.push(l.fetchBids(s));yield Promise.all(o).then((e=>{for(var t of e.flat()){var s;if(t){var a=t.name;a in i._bids||(i._bids[a]=[]),null==(s=i._bids[a])||s.push(t)}}})),i.runWaitCallbacks(n),t&&t()}))()}applyPrefetchedBidsToSlots(e,t,i){var s=this;return(0,H.Z)((function*(){var a=[];Object.entries(e).forEach((e=>{var[t,[r,d]]=e;a.push(s.applyPrefetchedBidsToSlot(t,r,d,i))})),yield Promise.all(a).then(t)}))()}applyPrefetchedBidsToSlot(e,t,i,s){var a=this;return(0,H.Z)((function*(){return new Promise((r=>{var d=setTimeout((()=>{r(e)}),1500);if(a.cleanupSlotAndExpiredBids(e,t),a._waitingBidsMap.has(e)){a.addWaitCallback(e,(()=>a.applyStoredBidsToSlot(e,t,i,s).then((e=>{r(e),d&&clearTimeout(d)}))))}else a.applyStoredBidsToSlot(e,t,i,s).then((e=>{r(e),d&&clearTimeout(d)}))}))}))()}applyStoredBidsToSlot(e,t,i,s){var a=this;return(0,H.Z)((function*(){for(!a.hasStoredBids(e)&&s&&(yield a.fetchAllBids({[e]:i}));a.hasStoredBids(e);){var r,d=null==(r=a._bids[e])?void 0:r.pop();if(!d)break;var n=a._bidders[d.bidder];null==n||n.applyBid(t,d)}return a.flushAdsBids([e]),e}))()}cleanupSlotAndExpiredBids(e,t){t.getTargetingKeys().forEach((e=>{(e.startsWith("amzn")||e.startsWith("pwt"))&&t.clearTargeting(e)})),this.flushExpiredAdsBids([e])}initWaitCallback(e){this._waitingBidsMap.has(e)||this._waitingBidsMap.set(e,null)}addWaitCallback(e,t){this._waitingBidsMap.has(e)&&this._waitingBidsMap.set(e,t)}runWaitCallbacks(e){for(var t of e){var i;if(this._waitingBidsMap.has(t))null==(i=this._waitingBidsMap.get(t))||i(),this._waitingBidsMap.delete(t)}}flushAdsBids(e){e?e.forEach((e=>{this._bids[e]&&delete this._bids[e]})):this._bids={}}flushExpiredAdsBids(e){var t=(0,z.Z)();(e||Object.keys(this._bids)).forEach((e=>{var i=this._bids[e];if(i){var s=i.filter((e=>e.lastFetchedTimestamp+3e4>t));s.length?this._bids[e]=s:delete this._bids[e]}}))}hasStoredBids(e){var t,i;return!(null==(t=null==(i=this._bids[e])?void 0:i.length)||!t)}}te._eleIdToCurrentAid={};var ie=i("./app/j/ads/constants/adConstants.ts"),se=i("./app/j/ads/enums/AdsNames.ts"),ae=i("./app/j/ads/enums/AdsTypes.ts"),re=i("./app/j/ads/enums/RefreshReason.ts"),de=i("./app/j/ads/utils/AdEventEmitter.ts"),ne=i("./app/j/ads/utils/adsDebugToolUtils.ts"),oe=i("./app/j/compatibility/lazilyLoadComponent.ts"),le=i("./node_modules/react/index.js"),ge=i("./app/j/utils/renderReactAppToDOM.tsx"),he=(0,oe.Z)((()=>i.e("ads_debug_tool_lazy").then(i.bind(i,"./app/j/ads/components/debug_tool/AdsDebugTool.tsx"))));function ue(e,t){(0,ge.Z)(le.createElement(he,t),e)}var ce,pe=(e,t,i)=>{t&&i||(e.owpbjs?((e,t,i)=>{e.owpbjs&&(t&&e.owpbjs.setConfig({consentManagement:{gdpr:{cmpApi:"static",consentData:{getTCData:{gdprApplies:!1}}},usp:{cmpApi:"iab",timeout:500}}}),i&&e.owpbjs.setConfig({consentManagement:{gdpr:{allowAuctionWithoutConsent:!0,cmpApi:"iab",timeout:500},usp:{cmpApi:"static",consentData:{getUSPData:{uspString:"1---"}}}}}),i||t||e.owpbjs.setConfig({consentManagement:{gdpr:{cmpApi:"static",consentData:{getTCData:{gdprApplies:!1}}},usp:{cmpApi:"static",consentData:{getUSPData:{uspString:"1---"}}}}}))})(e,t,i):((e,t,i)=>{if(e.PWT){var s=e.PWT.HookForPrebidSetConfig;e.PWT.HookForPrebidSetConfig=e=>{var a,r;s&&"function"==typeof s&&s(e),t&&e.consentManagement&&(e.consentManagement.gdpr={cmpApi:"static",consentData:{getTCData:{gdprApplies:!1}}}),i&&null!=(a=e.consentManagement)&&a.usp&&(null==(r=e.consentManagement)||delete r.usp),i||t||!e.consentManagement||delete e.consentManagement}}})(e,t,i))},Ee=(e,t,i,s,a,r)=>new Promise(((d,n)=>{try{((e,t,i,s,a,r,d,n)=>{var o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState)if(200===o.status){var l,g=null!=(l=JSON.parse(o.responseText))?l:{},h=B(g,e,t,i,s,a,r);d(h)}else 0===o.status?null==n||n(new Error("Fetching ad floors timed out")):null==n||n(new Error("Fetching ad floors failed with statusCode="+o.status))},o.open("GET","https://d3q9h1uwpmml3k.cloudfront.net/floors.json",!0),o.setRequestHeader("Cache-Control","max-age="+m),o.send()})(e,t,i,s,a,r,(e=>{d(e)}),(e=>{n(e)}))}catch(o){n(o)}}));!function(e){e.CUSTOM_HARD_UPR="chu",e.PWT_BID_ECPM="pwtecp"}(ce||(ce={}));var fe=[4,3.8,3.6,3.4,3.2,3,2.8,2.6,2.4,2.2,2,1.95,1.9,1.85,1.8,1.75,1.7,1.65,1.6,1.55,1.5,1.45,1.4,1.35,1.3,1.25,1.2,1.15,1.1,1.05,1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.36,.32,.28,.24,.2,.18,.16,.14,.12,.1,.09,.08,.07,.06,.05,.04,.03,.02,.01],me=e=>{for(var t=0;t<fe.length;t++){var i=fe[t];if(e>=i)return i}return fe[fe.length-1]},_e=(e,t,i,s,a)=>{var r=((e,t)=>{var i,s,a,r=e.floors.geoc_mult,d=null!=(i=null!=(s=null==r?void 0:r[t])?s:null==r?void 0:r.other)?i:1;return(null!=(a=e.partners.adX.minUSUPRFloor)?a:0)*d})(e,s);if(a&&a>0)return me(a);var d=C(e.floors,t,"UPR",i,e.staticMultiplier);return me(Math.max(d,r))},Ae=(e,t,i,s)=>{if("function"==typeof(null==t?void 0:t.setTargeting)){var a=t.getSlotElementId(),r=((e,t,i,s)=>{if("function"==typeof(null==t?void 0:t.getTargeting)&&"function"==typeof(null==t?void 0:t.getSlotElementId)){var a=t.getSlotElementId(),r=t.getTargeting(ce.PWT_BID_ECPM),d=()=>_e(e,a,i,s);if(0===r.length)return d();var n=+r[0];return Number.isNaN(n)?d():_e(e,a,i,s,n)}return 0})(e,t,"function"==typeof i?i(a):i,s);t.setTargeting(ce.CUSTOM_HARD_UPR,(e=>{var t=D(e),i=String(t);switch(i.length){case 1:return i+".00";case 3:return i+"0";default:return i}})(r>0?r:.01))}return t},ve="6396803",Te=i("./app/j/global/Rollbar.ts"),Se=i("./app/j/i18n/$t.ts"),be=i("./node_modules/invariant/browser.js"),Re=i.n(be),Pe=i("./node_modules/matchmedia/index.js"),ye=i.n(Pe),Oe=i("./node_modules/react-dom/index.js"),De=i("./app/j/utils/FetchWith.ts"),Ce=i("./app/j/utils/isAdBlockerEnabled.ts"),Be=i("./app/j/utils/LocalStorageHelper.ts"),Ie=i("./app/j/utils/log-ads-event.ts"),xe=i("./app/j/utils/viewport.ts"),Me="adsDebugMenu";class Le{constructor(e,t,i,a){var n;if(this._slots={},this._outOfPageSlots={},this._resizeListeners=new Map,this._isAdsDebugPanelOpen=!1,this._adsPerformanceFirstRenderCallback=null,this._eventEmitter=new de.Z,this._hasMarkedFirstAdRendered=!1,this._hasMarkedSetRectangleHeaderAdRendered=!1,this._gptRan=!1,this._adsRefreshCount={},this._lastAdRefreshData={},this._PWTFriendlyIframeCreatives={},this.amazonBidsData=[],this.bidReportStartTime=(new Date).getTime(),this.TAMBiddingTimeout=1300,this.PWTBiddingTimeout=1300,this.GPTFailsafeTimeout=1400,this.onPubmaticLoad=(e,t)=>{this.PWT=e,this.OWT=t},this.getOutOfPageAdsSlotNames=()=>{var e;return null!=(e=this.config.outOfPageSlotNames)?e:[]},this.shouldRenderOutOfPageSlots=()=>this.getOutOfPageAdsSlotNames().length>0,this.displayOutOfPageAd=e=>{setTimeout((()=>{this.googletag.cmd.push((()=>{if(this._outOfPageSlots[e])try{this.googletag.display(this._outOfPageSlots[e]),this.refreshOutOfPageAd(e)}catch(t){Math.random()<=.01&&Te.Z.warn("Ads: Error displaying out of page ad",t)}else Te.Z.warn('Ads: Tried to display out of page ad for non-existent ad slot "'+e+'"')}))}),5e3)},this.refreshOutOfPageAd=e=>{this.googletag.cmd.push((()=>{try{this.googletag.pubads().refresh([this._outOfPageSlots[e]])}catch(t){Math.random()<=.01&&Te.Z.warn("Ads: Out of page ad refresh command failed",{errorMessage:t.message,keyValues:this.config.keyValues,googletagProperties:Object.keys(this.googletag)})}}))},this.getAdSlotContainerSizeFromDOM=e=>{var t=document.getElementById(e);return t?[t.offsetWidth,t.offsetHeight]:null},this.updateAndSetAdRefreshCountKVForAdUnit=e=>{var t=this._slots[e];if(null!=t&&t.setTargeting&&"function"==typeof(null==t?void 0:t.setTargeting)){if(this._adsRefreshCount[e])this._adsRefreshCount[e]++;else{var i=1;!this.shouldServerRenderAd||e!==se.h.SET_SIDEBAR_V4&&e!==se.h.SET_RECTANGLE_HEADER||(i=2),this._adsRefreshCount[e]=i}var a=this._adsRefreshCount[e];t.setTargeting(s.AD_REFRESH_COUNT,a.toString());var r=(0,d.bN)(a);null!==r&&a<4?t.setTargeting(s.AD_REFRESH_COUNT_BUCKETS,r):4===a&&t.clearTargeting(s.AD_REFRESH_COUNT_BUCKETS)}return t},this.setRequestedWithoutBidsKVForSlots=(e,t,i)=>{if(e.setTargeting&&"function"==typeof e.setTargeting){var a=E.yl.WithBids;t&&i?a=E.yl.WithoutApstagAndPWTBids:t?a=E.yl.WithoutApstagBid:i&&(a=E.yl.WithoutPWTBid),e.setTargeting(s.REQUESTED_WITHOUT_BIDS,a)}return e},this.removeFriendlyIframeTargetingKVFromSlot=e=>(((null==e||null==e.getTargetingKeys?void 0:e.getTargetingKeys())||[]).indexOf(s.FRIENDLY_IFRAME)>-1&&(null==e||null==e.clearTargeting||e.clearTargeting(s.FRIENDLY_IFRAME)),e),this.updateAndSetIdentityHubSolutionPWTVersionKVForAdUnit=e=>{var t=e.getTargeting(s.PWT_VERSION_ID);t.length>0&&"24"!==t[0]&&e.setTargeting(s.PWT_VERSION_ID,"24")},this.handleSlotRenderEnded=e=>{var t=e.slot.getSlotElementId(),i=(0,d.e9)(t);(""+i).startsWith("php-")||Object.keys(this._outOfPageSlots).includes(i)||(this.showAdHeadingForNotEmptySlotOrNotQuizletAd(t,e.isEmpty,e.advertiserId,e.campaignId),e.isEmpty?this.callEmptyAdCallback(i):this.callEventCallback(i,de.T.AdLoaded,e),this.getAdType(i)===ae.D.NATIVE&&null!=e.slot.getHtml&&e.slot.getHtml().includes("native-ad")&&this.callNativeAdCallback(i),this._hasMarkedFirstAdRendered||(this._hasMarkedFirstAdRendered=!0,(0,d.OE)()),this.shouldMarkRectangleHeaderAdRendered(i)&&(this._hasMarkedSetRectangleHeaderAdRendered=!0,(0,d.G2)()))},this.handleSlotRequestLogging=e=>{this.logAdEventToBQ("ad_slot_requested",(0,d.e9)(e.slot.getSlotElementId()))},this.handleSlotRenderEndedLogging=e=>{var t;this._adsPerformanceFirstRenderCallback&&(this._adsPerformanceFirstRenderCallback(),this._adsPerformanceFirstRenderCallback=null);var i=e.slot.getSlotElementId(),s=e.size,a=this.getAdSlotContainerSizeFromDOM(i),r=null!=(t=null==e.slot.getContentUrl?void 0:e.slot.getContentUrl())?t:"";this.logAdEventToBQ("ad_slot_rendered",(0,d.e9)(i),Object.assign({advertiserId:e.advertiserId,containerSize:a,isEmpty:e.isEmpty,isRenderingDifferentSize:JSON.stringify(s)!==JSON.stringify(a),size:s},r&&{requestLength:r.length,isRequestOver2kChars:r.length>=2e3}))},this.handleImpressionViewableLogging=e=>{this.logAdEventToBQ("ad_slot_impression_viewable",(0,d.e9)(e.slot.getSlotElementId()))},this.logAdEventToBQ=(e,t,i)=>{(0,Ie.Z)(e,t,i)},this.onAdViewableEvent=e=>{if(e&&e.ele_id){var t=e.ele_id.replace(/dfp-|php-/,"");this.callEventCallback(t,de.T.AdIsViewable,e)}},this.onWinningEvent=e=>{if(e&&e.ele_id){var t=e.ele_id.replace(/dfp-|php-/,"");this.callWinningEventCallback(t,e)}},this.getWidthAndHeightFromMediaQueryEvent=e=>{var t=/min-width:\s*(\d+)px/g.exec(e.media),i=parseInt(u()(o()(t,1),""),10),s=/min-height:\s*(\d+)px/g.exec(e.media),a=parseInt(u()(o()(s,1),""),10);return Number.isNaN(a)||Number.isNaN(i)?(Te.Z.warn("Ads: Failed to parse resize media query change."),null):[i,a]},this._handleMediaQueryChange=e=>{var t=this.getWidthAndHeightFromMediaQueryEvent(e);if(t){var[i,s]=(0,d.EQ)(),[a,r]=t,n=this.getResizeListenerForSize([a,r]);if(n){var o=[];if(n.adsToRefresh.forEach((e=>{var t=this.config.registeredAds[e];t&&((0,c.fO)(e,t,{height:s,width:i}).some((e=>{var[,t]=e;return t.length>0}))&&(o.push(e),this.clearSlot(e),this.updateSlotSizeMapping(e),this.isShowing(e)||this.defineSlot(e,t)))})),o.length>0){var l=o.map(d.tI);this._adEventLogger.resetAuctionIds(l),this.enqueueAdsForRefresh(o,re.q.RESIZE_REFRESH)}}}},this.shouldMarkRectangleHeaderAdRendered=e=>!this.shouldServerRenderAd&&!this._hasMarkedSetRectangleHeaderAdRendered&&e===se.h.SET_RECTANGLE_HEADER&&this.isRegistered(se.h.SET_RECTANGLE_HEADER),this.config=t,this.config.shouldLogAdRequests=!0,this.googletag=e,this.QMeasure=i,this._adEventLogger=a,this._adEventLogger.addLogInfo({browserData:t.browserData,deviceCategory:t.deviceCategory,keyValues:t.keyValues,userId:null==(n=t.user)?void 0:n.id}),this._adEventLogger.addOnAdViewableCallback(this.onAdViewableEvent),this._adEventLogger.addOnWinningEventCallback(this.onWinningEvent),this.shouldServerRenderAd="Sets/show"===t.actionString,(0,d.Yh)(),"control"!==this.config.flooringTrainVariant||"control"!==this.config.flooringTestVariantTimeRange){var l,g,h=new Be.Z,p=(null==(l=this.config)||null==(g=l.browserData)?void 0:g.browserName)||"",f=(()=>{var e=h.getItem(ie.Vj)||"0";try{return parseInt(e,10)}catch(t){return 0}})();this.flooringConfig=B(v("upr10cOw1x").floors,t.deviceCategory,p,t.countryCode,f,"upr10cOw1x","control"),Ee(t.deviceCategory,p,t.countryCode,f,this.config.flooringTrainVariant||"control",this.config.flooringTestVariantTimeRange||"control").then((e=>{this.flooringConfig=e})).catch((e=>{Math.random()<=.01&&Te.Z.warn("Ads (1%): Failed to fetch floors for advertisers",e)}))}else this.flooringConfig=v("control");var m=this.hasRegisteredAdsWithHeaderBidding(this.config.registeredAds),_=this.hasRegisteredAdsWithPWTBidding(this.config.registeredAds);(m||_)&&(this.BidManager=new te,this.BidManager.setup(this.config,(()=>this.flooringConfig),this._adEventLogger,{a9PubId:"3742",a9Timeout:this.TAMBiddingTimeout,didPhpAdsRender:this.shouldServerRenderAd,disableA9:!m,disablePWT:!_})),this.PWT=_?this.setupPWTBiddingLibrary():null;var A="experiment"===i.getFeatureFlagOrTestVariantWithoutEnrolling("UpgradePrebidVersionV2[default,ads]");_&&A&&pe(r.Z,this.config.ccpaApplies,this.config.gdprApplies);var T="experiment"===i.peekAtVariation("RemoveAdsQWaitQLoadDependency[default,ads]");!_||this.shouldServerRenderAd||T||this.loadAdBiddingLibraries(),!m&&!_&&!this.shouldServerRenderAd&&Object.keys(this.config.registeredAds).length>0&&this.loadGPTLibrary()}setupPWTBiddingLibrary(){var e="experiment"!==this.QMeasure.peekAtVariation("RemoveAdsQWaitQLoadDependency[default,ads]");return r.Z.PWT?(e||(this.OWT=r.Z.OWT),r.Z.PWT):e?((0,Ce.Z)()||QWait("Quizlet.pubmatic",(()=>{this.PWT=r.Z.PWT,this.OWT=r.Z.OWT})),r.Z.PWT):(this.OWT=r.Z.OWT,r.Z.PWT)}loadAdBiddingLibraries(){var e=null;F(r.Z.PWT,(()=>{QLoad("Quizlet.pubmatic"),this.loadGPTLibrary(),null!==e&&this.config.shouldLogAdRequests&&e()})),e=(0,d.ZP)("pwt_download_load_time"),this.loadPWTLibrary(),setTimeout((()=>{this.loadGPTLibrary()}),3e3)}loadPWTLibrary(){var e="https://ads.pubmatic.com/AdServer/js/pwt/158861/1887",t=this.getPWTVersionId();t&&t.length>0&&(e+="/"+t),(0,d.LN)(e+"/pwt.js")}getPWTVersionId(){var e=this.config.forcePWTVersionId||"",t=window.location.href;if("experiment"===this.QMeasure.getVariationAndEnroll("UpgradePrebidVersionV2[default,ads]")&&(e="74"),!e&&t.includes("pwtv=")){var i=/pwtv=(.*?)(&|$)/g.exec(t);i&&i.length>=2&&i[1].length>0&&(e=i[1])}return e}loadGPTLibrary(){if(!this._gptRan){if(this._gptRan=!0,this.config.shouldLogAdRequests){var e=(0,d.ZP)("gpt_download_load_time");this.googletag.cmd.push((()=>{e()}))}(0,d.LN)("https://securepubads.g.doubleclick.net/tag/js/gpt.js")}}init(){this.config.areAdsDisabled||((0,d.Ck)(),this.config.shouldLogAdRequests&&(this._adsPerformanceFirstRenderCallback=(0,d.ZP)("first_ad_render_load_time")),this.addKeyValueToConfigObject(s.OW_SCREEN_HEIGHT,(0,xe.C)().toString()),this.addKeyValueToConfigObject(s.OW_SCREEN_WIDTH,(0,xe.d)().toString()),this.googletag.cmd.push((()=>{this.googletag.pubads().setTagForChildDirectedTreatment(this.config.tagForChildDirectedTreatment),this.addUSPConsent(),this.addPubAdsEventListeners(),this.setTargeting()})),this.defineSlotsForOutOfPageAds(),this.defineSlotsForRegisteredAds(),this.registerCallbackForServerRenderedAds(),this.googletag.cmd.push((()=>{try{this.googletag.pubads().disableInitialLoad(),this.googletag.enableServices()}catch(e){Math.random()<=.01&&Te.Z.warn("Ads: Error with initialization",e)}})))}addPubAdsEventListeners(){var e=this.googletag.pubads();e.addEventListener("slotRenderEnded",this.handleSlotRenderEnded),this.config.shouldLogAdRequests&&(e.addEventListener("slotRequested",this.handleSlotRequestLogging),e.addEventListener("slotRenderEnded",this.handleSlotRenderEndedLogging),e.addEventListener("impressionViewable",this.handleImpressionViewableLogging)),this._adEventLogger.setupWinningBidLogging(this.googletag,this.config.shouldLogWinningBids,this.config.shouldLogWinningBidsToBQ),this._adEventLogger.setupClickTracking(!1,!0)}setTargeting(){for(var[e,t]of Object.entries(this.config.keyValues))this.googletag.pubads().setTargeting(e,t)}addKV(e,t){this.googletag.cmd.push((()=>{this.addKeyValueToConfigObject(e,t),this.setTargeting()}))}addKVToSlot(e,t,i){this.isShowing(e)&&this.googletag.cmd.push((()=>{var s;null==(s=this._slots[e])||s.setTargeting(t,i)}))}defineSlotsForOutOfPageAds(){this.getOutOfPageAdsSlotNames().forEach((e=>this.defineOutOfPageSlot(e)))}defineOutOfPageSlot(e){this._outOfPageSlots[e]={},this.googletag.cmd.push((()=>{this._outOfPageSlots[e]=this.googletag.defineOutOfPageSlot("/"+ve+"/"+e,(0,d.tI)(e)).setCollapseEmptyDiv(!0).addService(this.googletag.pubads())}))}defineSlotsForRegisteredAds(){Object.keys(this.config.registeredAds).filter((e=>{var t=this.config.registeredAds[e];if(Re()(t,"Ad should have been registered"),t.type===ae.D.VIDEO||!0===t.lazyLoaded)return!1;if(!t.defineSlotImmediately)return!1;var[i]=(0,c.fO)(e,t,{height:(0,xe.C)(),width:(0,xe.d)()});return!(i.length>=2&&0===i[1].length)})).forEach((e=>{var t=this.config.registeredAds[e];Re()(t,"Ad '"+e+"' should have been registered"),this.defineSlot(e,t)}))}defineSlot(e,t){this._slots[e]={},this.googletag.cmd.push((()=>{try{this._slots[e]=this.googletag.defineSlot("/"+ve+"/"+e,(0,c.Dm)(t.type),(0,d.tI)(e)).defineSizeMapping((0,c.fO)(e,t,{height:(0,xe.C)(),width:(0,xe.d)()})).setCollapseEmptyDiv(!0).addService(this.googletag.pubads())}catch(i){Math.random()<=.01&&Te.Z.warn("Ads: Define Slot for "+e+" failed",i)}}))}destroySlot(e){this.isRegistered(e)&&this.isShowing(e)?this.googletag.cmd.push((()=>{try{var t=this._slots[e];t&&(this.googletag.destroySlots([t]),this.removeResizeListenerForAd(e),delete this._slots[e])}catch(i){Math.random()<=.001&&Te.Z.warn("Ads (0.1%): Failed to destroy ad slot",i,e)}})):Math.random()<=.01&&Te.Z.warn("Ads (1%): Could not destroy ad slot for '"+e+"' unit",{wasRegistered:this.isRegistered(e),hadSlot:this.isShowing(e)})}registerCallbackForServerRenderedAds(){Object.keys(this.config.registeredAds).forEach((e=>{var t=this.config.registeredAds[e];null!=t&&t.isPHPRendered&&this.registerOnEmptyAdCallback(e,this.collapseAdContainer(e))}))}destroyPHPDefinedSlot(e){this.googletag.cmd.push((()=>{var t=[];if(e&&this.isShowing(e)){var i=this._slots[e];i&&t.push(i)}else{var s=this.googletag.pubads().getSlots().filter((e=>e.getSlotElementId().startsWith("php-")));t=s}t.length>0&&this.googletag.destroySlots(t)}))}destroyPHPSlots(){this.destroyPHPDefinedSlot()}getValidPrefetchAds(e){return e.filter((e=>this.shouldrefreshWithPrefetch(e)||this.isShowing(e)))}prefetchBids(e,t){void 0===e&&(e=Object.keys(this._slots));var i=this.getValidPrefetchAds(e).reduce(((e,t)=>{var i=this.config.registeredAds[t];return i&&(e[t]=i),e}),{});this.googletag.cmd.push((()=>{this.BidManager&&this.BidManager.fetchAllBids(i,(()=>{null==t||t()}))}))}refreshPrefetchedAds(e,t){void 0===e&&(e=Object.keys(this._slots));var i=this.getValidPrefetchAds(e).reduce(((e,t)=>{var i=this._slots[t],s=this.config.registeredAds[t];return i&&(e[t]=[i,s]),e}),{});this.BidManager&&this.BidManager.applyPrefetchedBidsToSlots(i,(e=>this.refreshGPTAdSlots(e)),t)}prefetchAndRefreshAds(e){void 0===e&&(e=Object.keys(this._slots)),this.prefetchBids(e,(()=>this.refreshPrefetchedAds(e,!1)))}updateSlotSizeMapping(e){if(this.isShowing(e)&&this.isRegistered(e)){var[t,i]=(0,d.EQ)(),s=(0,c.fO)(e,this.config.registeredAds[e],{height:i,width:t}),a=this._slots[e];null!=a&&a.defineSizeMapping&&a.defineSizeMapping(s)}}displayAd(e){var t=this.isShowing(e);if(this.isRegistered(e)){var i=this.config.registeredAds[e];Re()(i,"Ad should have been registered"),t||this.defineSlot(e,i),this.setPageDepthKeyValue(),this.addResizeListenersForAd(e),this.googletag.cmd.push((()=>{var t=(0,d.tI)(e);if(document.getElementById(t))try{this.googletag.display(t),this.enqueueAdsForRefresh([e],re.q.MOUNT_REFRESH)}catch(i){Te.Z.warn("Ads: Ad display command failed",i)}else Te.Z.warn("Ads: Ad container with id "+t+" does not exist on page")}))}else Te.Z.warn('Ads: Tried to display ad for non-existent ad slot "'+e+'"')}clearSlot(e){var t=this._slots[e];t&&this.googletag.pubads().clear([t])}enqueueAdsForRefresh(e,t){void 0===e&&(e=Object.keys(this._slots)),void 0===t&&(t=re.q.MOUNT_REFRESH);var i=e.filter((e=>{var t,i,s=(0,z.Z)(),a=null!=(t=null==(i=this._lastAdRefreshData[e])?void 0:i.timestamp)?t:0,r=!a||s-a>1e3;return r&&(this._lastAdRefreshData[e]=Object.assign({},this._lastAdRefreshData[e],{timestamp:s})),r}));i.length>0&&(i.forEach((e=>this.addKVToSlot(e,s.RESIZE,t===re.q.RESIZE_REFRESH?"1":"0"))),this.refreshAds(i))}refreshAds(e){if(void 0===e&&(e=Object.keys(this._slots)),!this._isAdsDebugPanelOpen){var t=Array.from(new Set(e)),{prefetchAds:i=[],adsToPrefetchAndRefresh:s=[],nonRegisteredAds:a=[]}=g()(t,(e=>this.shouldrefreshWithPrefetch(e)?"prefetchAds":this.isShowing(e)?"adsToPrefetchAndRefresh":this.isRegistered(e)?"_":"nonRegisteredAds"));a.forEach((e=>{Te.Z.warn('Ads: Tried to refresh ad for non-existent ad slot "'+e+'"')})),i.length>0&&this.refreshPrefetchedAds(i,!0),s.length>0&&this.prefetchAndRefreshAds(s)}}handleBidFinished(e,t){t.hasRequestStarted||t.bidProcessFinishedApstag&&t.bidProcessFinishedPWT&&(t.hasRequestStarted=!0,t.failsafeTimeout&&clearTimeout(t.failsafeTimeout),this.refreshGPTAdSlots(e,t.bidProcessTimeoutApstag,t.bidProcessTimeoutPWT))}refreshGPTAdSlots(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.googletag.cmd.push((()=>{var s=e.map(this.updateAndSetAdRefreshCountKVForAdUnit).filter((e=>void 0!==e)).map((e=>this.setRequestedWithoutBidsKVForSlots(e,t,i)));this.flooringConfig.partners.adX.enabled&&(s=s.map((e=>Ae(this.flooringConfig,e,(e=>{var t;return(0,d.RK)(null==(t=this._adEventLogger)?void 0:t._winningBids,e,E.HS.PreAuction)}),this.config.countryCode))));var a=this.config.forcePWTVersionId||"";a&&a.length>0&&s.forEach(this.updateAndSetIdentityHubSolutionPWTVersionKVForAdUnit);try{this.googletag.pubads().refresh(s);var r=s.map((e=>e.getSlotElementId()));new Set(r).size!==r.length&&Math.random()<=.01&&Te.Z.warn("Ads: Refreshing duplicate slots",{argument:e,refreshed:r}),this._adEventLogger.markGPTRequestSent(r)}catch(o){var n=this.googletag.pubadsReady?"Ads: Ad refresh command failed":"Ads: Ad tried to refresh before pubadsReady";Math.random()<=.01&&Te.Z.warn(n,{errorMessage:o.message,keyValues:this.config.keyValues,googletagProperties:Object.keys(this.googletag)})}}))}saveBidsResponseForDebug(e){var t;null!=(t=this.config.user)&&t.isAdmin&&window.location.search.includes("ads_debug_tool=1")&&(this.amazonBidsData=[...this.amazonBidsData,...e])}getAPSAdsSlots(e){void 0===e&&(e=Object.keys(this.config.registeredAds));var t=e.filter((e=>this.usesHeaderBidding(e)&&this.isShowing(e))),[i,s]=(0,d.EQ)();return t.reduce(((e,t)=>{var a=this._slots[t],r=this.config.registeredAds[t];if(a){a.getTargetingKeys().forEach((e=>{e.startsWith("amzn")&&a.clearTargeting(e)}));var[d,n]=(0,c.fO)(t,r,{height:s,width:i})[0];if(!n.length)return e;e.push({sizes:n,slotID:a.getSlotElementId(),slotName:a.getAdUnitPath(),slotParams:{}})}return e}),[])}getPWTAdsSlots(e){return void 0===e&&(e=Object.keys(this.config.registeredAds)),e.filter((e=>this.config.registeredAds[e].usePWTBidding&&!!this._slots[e])).map((e=>this._slots[e]))}registerExternalBidders(e){e.length>0&&this.OWT&&this.OWT.registerExternalBidders(e)}notifyExternalBiddingComplete(e){e.length>0&&this.OWT&&this.OWT.notifyExternalBiddingComplete(e)}getResizeListenerForSize(e){var[t,i]=e,s=t+"x"+i;if(!this._resizeListeners.has(s)){var a=this.getMatchMedia("(min-width: "+t+"px) and (min-height: "+i+"px)");a.addListener(this._handleMediaQueryChange),this._resizeListeners.set(s,{mediaQuery:a,adsToRefresh:new Set})}return this._resizeListeners.get(s)}addResizeListenersForAd(e){var t=this.config.registeredAds[e];((0,c.kd)(e,t)||[]).forEach((t=>{var i=t[0],s=this.getResizeListenerForSize(i);s&&s.adsToRefresh.add(e)}))}removeResizeListenerForAd(e){if(this.isRegistered(e)&&this.isShowing(e))for(var t of this._resizeListeners.values())t.adsToRefresh.delete(e)}isOutstream(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.isOutstream)}isRegistered(e){return!!this.config.registeredAds[e]}isShowing(e){return!!this._slots[e]}isOutOfPageSlotCreated(e){return!!this._outOfPageSlots[e]}usesHeaderBidding(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.useHeaderBidding)}usesPWTBidding(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.usePWTBidding)}isLazyLoaded(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.lazyLoaded)}allowsPrefetch(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.allowPrefetch)}shouldrefreshWithPrefetch(e){return this.allowsPrefetch(e)&&(this.usesPWTBidding(e)||this.usesHeaderBidding(e))}getAdType(e){var t;if(this.isRegistered(e))return null==(t=this.config.registeredAds[e])?void 0:t.type;Te.Z.warn('Ads: Tried to get ad type for a non-registered ad slot "'+e+'"')}getAdSlot(e){return this._slots[e]}getShowAdHeading(e){var t;return this.isRegistered(e)?!(null==(t=this.config.registeredAds[e])||!t.showAdHeading):(Te.Z.warn('Ads: Tried to get showAdHeading for a non-registered ad slot "'+e+'"'),!1)}setPrebidRequestKVs(e){var t=this.config.keyValues[s.GRADE_LEVELS],i=this.config.keyValues[s.IS_TEACHER];(t||i)&&e.forEach((e=>{e.bids=e.bids.map((e=>("appnexus"===e.bidder&&(e.params.keywords=e.params.keywords||{},e.params.keywords[s.GRADE_LEVELS]=t),"onemobile"===e.bidder&&(e.params.ext=e.params.ext||{},e.params.ext[s.IS_TEACHER]=i),e)))}))}showAdHeadingForNotEmptySlotOrNotQuizletAd(e,t,i,s){var a=this.getAdHeadingContainer(e);if(a){var r=(0,d.e9)(e);this.getShowAdHeading(r)&&!t&&4623761902!==i&&2548271416!==s?(a.style.visibility="visible",this.changeAdHeadingElementsDisplay(a,"block")):(a.style.visibility="hidden",this.changeAdHeadingElementsDisplay(a,"none"))}}changeAdHeadingElementsDisplay(e,t){this.changeChildElementDisplay(e,".AdHeading-removeLink",t),this.changeChildElementDisplay(e,".AdHeading-upgradePrice",t)}changeChildElementDisplay(e,t,i){var s=e.querySelector(t);s&&(s.style.display=i)}hasRegisteredAdsWithHeaderBidding(e){return(Object.values?Object.values(e):Object.getOwnPropertyNames(e).map((t=>e[t]))).some((e=>!0===e.useHeaderBidding))}hasRegisteredAdsWithPWTBidding(e){return(Object.values?Object.values(e):Object.getOwnPropertyNames(e).map((t=>e[t]))).some((e=>!0===e.usePWTBidding))}registerEventCallback(e,t,i){this._eventEmitter.on(e,t,i)}clearEventCallback(e,t){this._eventEmitter.off(e,t)}callEventCallback(e,t,i){this._eventEmitter.emit(e,t,i)}registerOnEmptyAdCallback(e,t){this.registerEventCallback(e,de.T.EmptyAdReceived,t)}clearOnEmptyAdCallback(e){this.clearEventCallback(e,de.T.EmptyAdReceived)}callEmptyAdCallback(e){this.callEventCallback(e,de.T.EmptyAdReceived)}registerOnNativeAdCallback(e,t){this.registerEventCallback(e,de.T.NativeAdReceived,t)}clearOnNativeAdCallback(e){this.clearEventCallback(e,de.T.NativeAdReceived)}callNativeAdCallback(e){this.callEventCallback(e,de.T.NativeAdReceived)}clearOnAdViewableEventCallback(e){this.clearEventCallback(e,de.T.AdIsViewable)}registerOnWinningEvent(e,t){this.registerEventCallback(e,de.T.WinningEvent,t)}clearOnWinningEventCallback(e){this.clearEventCallback(e,de.T.WinningEvent)}callWinningEventCallback(e,t){this.callEventCallback(e,de.T.WinningEvent,t)}getPageAdsDataForReport(){return this.googletag.pubads().getSlots().reduce(((e,t)=>{var i=t.getSlotElementId();if(e[i])return e;var s=this.getAdResponse(t),a=this.getTargetingKeys(t),r=this.getWinningBidDataForReport(i),d=this.getDfpQueryId(i),n=Object.assign({},r,d,s,{kvInfo:{}});if(a.length>0){var o=a.reduce(((e,i)=>(e[i]=this.getTargeting(t,i),e)),{});n.kvInfo=o}return e[i]=n,e}),{})}getAdResponse(e){return null==e.getResponseInformation?void 0:e.getResponseInformation()}getTargetingKeys(e){return null==e.getTargetingKeys?void 0:e.getTargetingKeys()}getTargeting(e,t){return null==e.getTargeting?void 0:e.getTargeting(t)}sendAdsReport(){var e=this.getPageAdsDataForReport();if(Object.keys(e).length<1)alert((0,Se.Z)("ads_report.no_ads"));else{var[t,i]=(0,d.EQ)(),s={adsData:e,kvData:Object.entries(this.config.keyValues).sort(ne.h),pageData:{url:window.location.href,pageWidth:t,pageHeight:i}};confirm((0,Se.Z)("ads_report.confirmation_text"))&&(0,De.cZ)("/ads/ads-report",s).then((e=>{if(e.success)alert((0,Se.Z)("ads_report.feedback_message"));else if(!e.success){var t=(0,Se.Z)("ads_report.feedback_message_error");alert(t+"\n"+e.error)}}))}}toggleAdsDebugMenu(){this._isAdsDebugPanelOpen?this.closeAdsDebugMenu():this.openAdsDebugMenu()}closeAdsDebugMenu(){var e=document.getElementById(Me);e&&(this._isAdsDebugPanelOpen=!1,(0,Oe.unmountComponentAtNode)(e),e.remove())}openAdsDebugMenu(){var e=this.getPageAdsDataForReport();if(document.getElementsByClassName("AdminDebugBar-inner")[0]&&Object.keys(e).length>0){this._isAdsDebugPanelOpen=!0;var t=document.getElementsByClassName("AdminDebugBar-inner")[0],i=t.parentNode,s=document.createElement("div");s.id=Me,i&&(i.insertBefore(s,t),ue(s,{keyValues:this.config.keyValues,pageAdsData:e,bidReportStartTime:this.bidReportStartTime,amazonBidsData:this.amazonBidsData}))}}getDfpQueryId(e){var t=document.getElementById(e);return t?{dfpQueryId:t.dataset.googleQueryId}:{}}getWinningBidDataForReport(e){var t=this._adEventLogger.getWinningBidsForSlot(e);return t&&t.length?{bidPayload:t.map((e=>["dfp_adv","bidder","dfp_size"].reduce(((t,i)=>e[i]?Object.assign({},t,{[i]:e[i]}):t),{})))}:{}}addKeyValueToConfigObject(e,t){this.config.keyValues[e]=t}removeKeyValueFromConfigObject(e){Object.keys(this.config.keyValues).includes(e)&&delete this.config.keyValues[e]}getMatchMedia(e){return ye()(e)}getAdHeadingContainer(e){return document.getElementById((0,d.aV)(e))}getAdsSizesFromCustomMapping(e){if(!this.isRegistered(e))return[];var[t,i]=(0,d.EQ)(),s=this.config.registeredAds[e],[a,r]=(0,c.fO)(e,s,{height:i,width:t})[0];return r}setPageDepthKeyValue(){if(!this._hasMarkedPageDepth&&(this._hasMarkedPageDepth=!0,!this.shouldServerRenderAd)){var e=0,t=new Be.Z,i=t.getItem(ie.Vj);null!==i&&(e=+i),e++,t.setItem(ie.Vj,e.toString()),e<=3?(this.addKeyValueToConfigObject(s.PAGE_DEPTH,e.toString()),this.googletag.pubadsReady&&this.googletag.pubads().setTargeting(s.PAGE_DEPTH,e.toString())):(this.removeKeyValueFromConfigObject(s.PAGE_DEPTH),this.googletag.pubadsReady&&this.googletag.pubads().clearTargeting(s.PAGE_DEPTH))}}resetPageDepthMark(){this._hasMarkedPageDepth=!1}getIsBCSEnabled(){var e;return null!=(e=this.config.isBCSEnabled)&&e}shouldUseSafeframe(e){return"teads"!==e.bidder&&("triplelift"!==e.bidder||"tlx"!==e.tl_source)}collapseAdContainer(e){return()=>{var t=document.getElementById(e);t&&(t.style.display="none")}}addUSPConsent(){var e=this.getUSPConsentState();e!==E.Kl.ApplicableWaitingForConsent&&e!==E.Kl.ApplicableConsentGiven||this.googletag.pubads().setPrivacySettings({restrictDataProcessing:!1}),e===E.Kl.ApplicableConsentNotGiven&&this.googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})}getUSPConsentState(){var e=this.config.keyValues.ot;return"string"==typeof e&&Object.values(E.Kl).indexOf(e)>=0?e:E.Kl.Unknown}}class we{constructor(e,t){this._slots={},this._outOfPageSlots={},this.config=t,this.googletag=e}getAdUnitPathForAdName(e,t){return"/"+e+"/"+t}defineOutOfPageSlot(e){this._outOfPageSlots[e]={},this.googletag.cmd.push((()=>{this._outOfPageSlots[e]=this.googletag.defineOutOfPageSlot("/"+$.ZP.NETWORK_CODE+"/"+e,(0,d.tI)(e)).setCollapseEmptyDiv(!0).addService(this.googletag.pubads())}))}defineSlotsForOutOfPageAds(){var e;(null!=(e=this.config.outOfPageSlotNames)?e:[]).forEach((e=>this.defineOutOfPageSlot(e)))}defineSlot(e,t){this._slots[e]={},this.googletag.cmd.push((()=>{try{this._slots[e]=this.googletag.defineSlot("/"+$.ZP.NETWORK_CODE+"/"+e,(0,c.Dm)(t.type),(0,d.tI)(e)).defineSizeMapping((0,c.fO)(e,t,{height:(0,xe.C)(),width:(0,xe.d)()})).setCollapseEmptyDiv(!0).addService(this.googletag.pubads())}catch(i){Math.random()<=.01&&Te.Z.warn("Ads: Define Slot for "+e+" failed",i)}}))}defineSlotsForRegisteredAds(e){Object.keys(e.registeredAds).filter((t=>{var i=e.registeredAds[t];if(Re()(i,"Ad should have been registered"),i.type===ae.D.VIDEO||!0===i.lazyLoaded)return!1;if(!i.defineSlotImmediately)return!1;var[s]=(0,c.fO)(t,i,{height:(0,xe.C)(),width:(0,xe.d)()});return!(s.length>=2&&0===s[1].length)})).forEach((t=>{var i=e.registeredAds[t];Re()(i,"Ad '"+t+"' should have been registered"),this.defineSlot(t,i)}))}clearSlot(e){var t=this._slots[e];t&&this.googletag.pubads().clear([t])}isOutOfPageSlotCreated(e){return!!this._outOfPageSlots[e]}refreshGPTAdSlots(e,t,i){this.googletag.cmd.push((()=>{var s=t(e);try{this.googletag.pubads().refresh(s);var a=s.map((e=>e.getSlotElementId()));new Set(a).size!==a.length&&Math.random()<=.01&&Te.Z.warn("Ads: Refreshing duplicate slots",{argument:e,refreshed:a}),i.markGPTRequestSent(a)}catch(d){var r=this.googletag.pubadsReady?"Ads: Ad refresh command failed":"Ads: Ad tried to refresh before pubadsReady";Math.random()<=.01&&Te.Z.warn(r,{errorMessage:d.message,keyValues:this.config.keyValues,googletagProperties:Object.keys(this.googletag)})}}))}destroySlot(e,t){this.googletag.cmd.push((()=>{try{var i=this._slots[e];i&&(this.googletag.destroySlots([i]),t(e),delete this._slots[e])}catch(s){Math.random()<=.001&&Te.Z.warn("Ads (0.1%): Failed to destroy ad slot",s,e)}}))}}class We{constructor(e,t,i){this._resizeListeners=new Map,this._gptRan=!1,this._hasMarkedPageDepth=!1,this.shouldRenderOutOfPageSlots=()=>this.getOutOfPageAdsSlotNames().length>0,this.displayOutOfPageAd=e=>{setTimeout((()=>{this.googletag.cmd.push((()=>{if(this.adSlots._outOfPageSlots[e])try{this.googletag.display(this.adSlots._outOfPageSlots[e]),this.refreshOutOfPageAd(e)}catch(t){Math.random()<=.01&&Te.Z.warn("Ads: Error displaying out of page ad",t)}else Te.Z.warn('Ads: Tried to display out of page ad for non-existent ad slot "'+e+'"')}))}),5e3)},this.refreshOutOfPageAd=e=>{this.googletag.cmd.push((()=>{try{this.googletag.pubads().refresh([this.adSlots._outOfPageSlots[e]])}catch(t){Math.random()<=.01&&Te.Z.warn("Ads: Out of page ad refresh command failed",{errorMessage:t.message,keyValues:this.config.keyValues,googletagProperties:Object.keys(this.googletag)})}}))},this.config=t,this.googletag=e,this.adSlots=new we(this.googletag,this.config),this._eventHandler=i}getUSPConsentState(){var e=this.config.keyValues.ot;return"string"==typeof e&&Object.values(E.Kl).indexOf(e)>=0?e:E.Kl.Unknown}addUSPConsent(){var e=this.getUSPConsentState();e!==E.Kl.ApplicableWaitingForConsent&&e!==E.Kl.ApplicableConsentGiven||this.googletag.pubads().setPrivacySettings({restrictDataProcessing:!1}),e===E.Kl.ApplicableConsentNotGiven&&this.googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})}setOnSlotRenderEndedCallback(e){this.googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{e(t)}))}))}runInGPTQueue(e){this.googletag.cmd.push((()=>{e()}))}collapseAdContainer(e){return()=>{var t=document.getElementById(e);t&&(t.style.display="none")}}registerCallbackForPHPRenderedAds(e,t){Object.keys(e.registeredAds).forEach((i=>{var s=e.registeredAds[i];null!=s&&s.isPHPRendered&&t(i,this.collapseAdContainer(i))}))}addKVToSlot(e,t,i){this.isShowing(e)&&this.googletag.cmd.push((()=>{var s;null==(s=this.getAdSlot(e))||s.setTargeting(t,i)}))}getAdSlot(e){return this.adSlots._slots[e]}getAdSlotKeys(){return Object.keys(this.adSlots._slots)}isShowing(e){return!!this.getAdSlot(e)}getOutOfPageAdSlotKeys(){return Object.keys(this.adSlots._outOfPageSlots)}getOutOfPageAdsSlotNames(){var e;return null!=(e=this.config.outOfPageSlotNames)?e:[]}setTargeting(){for(var[e,t]of Object.entries(this.config.keyValues))this.googletag.pubads().setTargeting(e,t)}addKV(e,t){this.googletag.cmd.push((()=>{this.addKeyValueToConfigObject(e,t),this.setTargeting()}))}addKeyValueToConfigObject(e,t){this.config.keyValues[e]=t}removeKeyValueFromConfigObject(){Object.keys(this.config.keyValues).includes(s.PAGE_DEPTH)&&delete this.config.keyValues[s.PAGE_DEPTH],this.googletag.pubadsReady&&this.googletag.pubads().clearTargeting(s.PAGE_DEPTH)}setPageDepthTargeting(e){this.addKeyValueToConfigObject(s.PAGE_DEPTH,e),this.googletag.pubadsReady&&this.googletag.pubads().setTargeting(s.PAGE_DEPTH,e)}loadGPTLibrary(){if(!this._gptRan){if(this._gptRan=!0,this.config.shouldLogAdRequests){var e=(0,d.ZP)("gpt_download_load_time");this.googletag.cmd.push((()=>{e()}))}(0,d.LN)("https://securepubads.g.doubleclick.net/tag/js/gpt.js")}}isRegistered(e){return!!this.config.registeredAds[e]}getResizeListenerForSize(e){var[t,i]=e,s=t+"x"+i;if(!this._resizeListeners.has(s)){var a=this.getMatchMedia("(min-width: "+t+"px) and (min-height: "+i+"px)");a.addListener(this._eventHandler),this._resizeListeners.set(s,{mediaQuery:a,adsToRefresh:new Set})}return this._resizeListeners.get(s)}addResizeListenersForAd(e){var t=this.config.registeredAds[e];((0,c.kd)(e,t)||[]).forEach((t=>{var i=t[0],s=this.getResizeListenerForSize(i);s&&s.adsToRefresh.add(e)}))}removeResizeListenerForAd(e){if(this.isRegistered(e)&&this.isShowing(e))for(var t of this._resizeListeners.values())t.adsToRefresh.delete(e)}displayAd(e,t,i){void 0===i&&(i=!1);var s=this.isShowing(e);if(this.isRegistered(e)){var a=this.config.registeredAds[e];Re()(a,"Ad should have been registered"),s||this.adSlots.defineSlot(e,a),this.setPageDepthKeyValue(i),this.addResizeListenersForAd(e),this.googletag.cmd.push((()=>{var i=(0,d.tI)(e);if(document.getElementById(i))try{this.googletag.display(i),t()}catch(s){Te.Z.warn("Ads: Ad display command failed",s)}else Te.Z.warn("Ads: Ad container with id "+i+" does not exist on page")}))}else Te.Z.warn('Ads: Tried to display ad for non-existent ad slot "'+e+'"')}setPageDepthKeyValue(e){if(void 0===e&&(e=!1),!this._hasMarkedPageDepth&&(this._hasMarkedPageDepth=!0,!e)){var t=0,i=new Be.Z,s=i.getItem(ie.Vj);null!==s&&(t=+s),t++,i.setItem(ie.Vj,t.toString()),t<=3?this.setPageDepthTargeting(t.toString()):this.removeKeyValueFromConfigObject()}}destroyPHPDefinedSlot(e){this.googletag.cmd.push((()=>{var t=[];if(this.isShowing(e)){var i=this.getAdSlot(e);i&&t.push(i)}t.length>0&&this.googletag.destroySlots(t)}))}destroyAllPHPSlots(){this.googletag.cmd.push((()=>{var e;(e=this.googletag.pubads().getSlots().filter((e=>e.getSlotElementId().startsWith("php-")))).length>0&&this.googletag.destroySlots(e)}))}destroySlot(e){this.adSlots.destroySlot(e,this.removeResizeListenerForAd)}resetPageDepthMark(){this._hasMarkedPageDepth=!1}getMatchMedia(e){return ye()(e)}initGPT(e,t){this.googletag.cmd.push((()=>{this.googletag.pubads().setTagForChildDirectedTreatment(this.config.tagForChildDirectedTreatment),this.addUSPConsent(),e(),this.setTargeting()})),this.adSlots.defineSlotsForOutOfPageAds(),this.adSlots.defineSlotsForRegisteredAds(this.config),this.registerCallbackForPHPRenderedAds(this.config,t),this.googletag.cmd.push((()=>{try{this.googletag.pubads().disableInitialLoad(),this.googletag.enableServices()}catch(e){Math.random()<=.01&&Te.Z.warn("Ads: Error with initialization",e)}}))}}var ke="adsDebugMenu";class Ne{constructor(e,t,i,a){var n;if(this._outOfPageSlots={},this._isAdsDebugPanelOpen=!1,this._adsPerformanceFirstRenderCallback=null,this._eventEmitter=new de.Z,this._hasMarkedFirstAdRendered=!1,this._hasMarkedSetRectangleHeaderAdRendered=!1,this._adsRefreshCount={},this._lastAdRefreshData={},this._PWTFriendlyIframeCreatives={},this.amazonBidsData=[],this.bidReportStartTime=(new Date).getTime(),this.TAMBiddingTimeout=1300,this.PWTBiddingTimeout=1300,this.GPTFailsafeTimeout=1400,this.onPubmaticLoad=(e,t)=>{this.PWT=e,this.OWT=t},this.shouldRenderOutOfPageSlots=()=>this.gptManager.getOutOfPageAdsSlotNames().length>0,this.displayOutOfPageAd=e=>{this.gptManager.displayOutOfPageAd(e)},this.refreshOutOfPageAd=e=>{this.gptManager.refreshOutOfPageAd(e)},this.getAdSlotContainerSizeFromDOM=e=>{var t=document.getElementById(e);return t?[t.offsetWidth,t.offsetHeight]:null},this.updateAndSetAdRefreshCountKVForAdUnit=e=>{var t=this.gptManager.getAdSlot(e);if(null!=t&&t.setTargeting&&"function"==typeof(null==t?void 0:t.setTargeting)){if(this._adsRefreshCount[e])this._adsRefreshCount[e]++;else{var i=1;!this.shouldPHPRenderAd||e!==se.h.SET_SIDEBAR_V4&&e!==se.h.SET_RECTANGLE_HEADER||(i=2),this._adsRefreshCount[e]=i}var a=this._adsRefreshCount[e];t.setTargeting(s.AD_REFRESH_COUNT,a.toString());var r=(0,d.bN)(a);null!==r&&a<4?t.setTargeting(s.AD_REFRESH_COUNT_BUCKETS,r):4===a&&t.clearTargeting(s.AD_REFRESH_COUNT_BUCKETS)}return t},this.setRequestedWithoutBidsKVForSlots=(e,t,i)=>{if(e.setTargeting&&"function"==typeof e.setTargeting){var a=E.yl.WithBids;t&&i?a=E.yl.WithoutApstagAndPWTBids:t?a=E.yl.WithoutApstagBid:i&&(a=E.yl.WithoutPWTBid),e.setTargeting(s.REQUESTED_WITHOUT_BIDS,a)}return e},this.removeFriendlyIframeTargetingKVFromSlot=e=>(((null==e||null==e.getTargetingKeys?void 0:e.getTargetingKeys())||[]).indexOf(s.FRIENDLY_IFRAME)>-1&&(null==e||null==e.clearTargeting||e.clearTargeting(s.FRIENDLY_IFRAME)),e),this.updateAndSetIdentityHubSolutionPWTVersionKVForAdUnit=e=>{var t=e.getTargeting(s.PWT_VERSION_ID);t.length>0&&"24"!==t[0]&&e.setTargeting(s.PWT_VERSION_ID,"24")},this.handleSlotRenderEnded=e=>{var t=e.slot.getSlotElementId(),i=(0,d.e9)(t);(""+i).startsWith("php-")||this.gptManager.getOutOfPageAdSlotKeys().includes(i)||(this.showAdHeadingForNotEmptySlotOrNotQuizletAd(t,e.isEmpty,e.advertiserId,e.campaignId),e.isEmpty?this.callEmptyAdCallback(i):this.callEventCallback(i,de.T.AdLoaded,e),this.getAdType(i)===ae.D.NATIVE&&null!=e.slot.getHtml&&e.slot.getHtml().includes("native-ad")&&this.callNativeAdCallback(i),this._hasMarkedFirstAdRendered||(this._hasMarkedFirstAdRendered=!0,(0,d.OE)()),this.shouldMarkRectangleHeaderAdRendered(i)&&(this._hasMarkedSetRectangleHeaderAdRendered=!0,(0,d.G2)()))},this.handleSlotRequestLogging=e=>{this.logAdEventToBQ("ad_slot_requested",(0,d.e9)(e.slot.getSlotElementId()))},this.handleSlotRenderEndedLogging=e=>{var t;this._adsPerformanceFirstRenderCallback&&(this._adsPerformanceFirstRenderCallback(),this._adsPerformanceFirstRenderCallback=null);var i=e.slot.getSlotElementId(),s=e.size,a=this.getAdSlotContainerSizeFromDOM(i),r=null!=(t=null==e.slot.getContentUrl?void 0:e.slot.getContentUrl())?t:"";this.logAdEventToBQ("ad_slot_rendered",(0,d.e9)(i),Object.assign({advertiserId:e.advertiserId,containerSize:a,isEmpty:e.isEmpty,isRenderingDifferentSize:JSON.stringify(s)!==JSON.stringify(a),size:s},r&&{requestLength:r.length,isRequestOver2kChars:r.length>=2e3}))},this.handleImpressionViewableLogging=e=>{this.logAdEventToBQ("ad_slot_impression_viewable",(0,d.e9)(e.slot.getSlotElementId()))},this.logAdEventToBQ=(e,t,i)=>{(0,Ie.Z)(e,t,i)},this.onAdViewableEvent=e=>{if(e&&e.ele_id){var t=e.ele_id.replace(/dfp-|php-/,"");this.callEventCallback(t,de.T.AdIsViewable,e)}},this.onWinningEvent=e=>{if(e&&e.ele_id){var t=e.ele_id.replace(/dfp-|php-/,"");this.callWinningEventCallback(t,e)}},this.getWidthAndHeightFromMediaQueryEvent=e=>{var t=/min-width:\s*(\d+)px/g.exec(e.media),i=parseInt(u()(o()(t,1),""),10),s=/min-height:\s*(\d+)px/g.exec(e.media),a=parseInt(u()(o()(s,1),""),10);return Number.isNaN(a)||Number.isNaN(i)?(Te.Z.warn("Ads: Failed to parse resize media query change."),null):[i,a]},this._handleMediaQueryChange=e=>{var t=this.getWidthAndHeightFromMediaQueryEvent(e);if(t){var[i,s]=(0,d.EQ)(),[a,r]=t,n=this.gptManager.getResizeListenerForSize([a,r]);if(n){var o=[];if(n.adsToRefresh.forEach((e=>{var t=this.config.registeredAds[e];t&&((0,c.fO)(e,t,{height:s,width:i}).some((e=>{var[,t]=e;return t.length>0}))&&(o.push(e),this.gptManager.adSlots.clearSlot(e),this.updateSlotSizeMapping(e),this.gptManager.isShowing(e)||this.gptManager.adSlots.defineSlot(e,t)))})),o.length>0){var l=o.map(d.tI);this._adEventLogger.resetAuctionIds(l),this.enqueueAdsForRefresh(o,re.q.RESIZE_REFRESH)}}}},this.shouldMarkRectangleHeaderAdRendered=e=>!this.shouldPHPRenderAd&&!this._hasMarkedSetRectangleHeaderAdRendered&&e===se.h.SET_RECTANGLE_HEADER&&this.isRegistered(se.h.SET_RECTANGLE_HEADER),this.config=t,this.config.shouldLogAdRequests=!0,this.googletag=e,this.QMeasure=i,this._adEventLogger=a,this._adEventLogger.addLogInfo({browserData:t.browserData,deviceCategory:t.deviceCategory,keyValues:t.keyValues,userId:null==(n=t.user)?void 0:n.id}),this._adEventLogger.addOnAdViewableCallback(this.onAdViewableEvent),this._adEventLogger.addOnWinningEventCallback(this.onWinningEvent),(0,d.Yh)(),this.shouldPHPRenderAd="Sets/show"===t.actionString,"control"!==this.config.flooringTrainVariant||"control"!==this.config.flooringTestVariantTimeRange){var l,g,h=new Be.Z,p=(null==(l=this.config)||null==(g=l.browserData)?void 0:g.browserName)||"",f=(()=>{var e=h.getItem(ie.Vj)||"0";try{return parseInt(e,10)}catch(t){return 0}})();this.flooringConfig=B(v("upr10cOw1x").floors,t.deviceCategory,p,t.countryCode,f,"upr10cOw1x","control"),Ee(t.deviceCategory,p,t.countryCode,f,this.config.flooringTrainVariant||"control",this.config.flooringTestVariantTimeRange||"control").then((e=>{this.flooringConfig=e})).catch((e=>{Math.random()<=.01&&Te.Z.warn("Ads (1%): Failed to fetch floors for advertisers",e)}))}else this.flooringConfig=v("control");var m=this.hasRegisteredAdsWithHeaderBidding(this.config.registeredAds),_=this.hasRegisteredAdsWithPWTBidding(this.config.registeredAds);(m||_)&&(this.BidManager=new te,this.BidManager.setup(this.config,(()=>this.flooringConfig),this._adEventLogger,{a9PubId:"3742",a9Timeout:this.TAMBiddingTimeout,didPhpAdsRender:this.shouldPHPRenderAd,disableA9:!m,disablePWT:!_})),this.PWT=_?this.setupPWTBiddingLibrary():null;var A="experiment"===i.getFeatureFlagOrTestVariantWithoutEnrolling("UpgradePrebidVersionV2[default,ads]");_&&A&&pe(r.Z,this.config.ccpaApplies,this.config.gdprApplies);var T="experiment"===i.peekAtVariation("RemoveAdsQWaitQLoadDependency[default,ads]");!_||this.shouldPHPRenderAd||T||this.loadAdBiddingLibraries(),this.gptManager=new We(e,t,this._handleMediaQueryChange),!m&&!_&&!this.shouldPHPRenderAd&&Object.keys(this.config.registeredAds).length>0&&this.gptManager.loadGPTLibrary()}setupPWTBiddingLibrary(){var e="experiment"!==this.QMeasure.peekAtVariation("RemoveAdsQWaitQLoadDependency[default,ads]");return r.Z.PWT?(e||(this.OWT=r.Z.OWT),r.Z.PWT):e?((0,Ce.Z)()||QWait("Quizlet.pubmatic",(()=>{this.PWT=r.Z.PWT,this.OWT=r.Z.OWT})),r.Z.PWT):(this.OWT=r.Z.OWT,r.Z.PWT)}loadAdBiddingLibraries(){var e=null;F(r.Z.PWT,(()=>{QLoad("Quizlet.pubmatic"),this.gptManager.loadGPTLibrary(),null!==e&&this.config.shouldLogAdRequests&&e()})),e=(0,d.ZP)("pwt_download_load_time"),this.loadPWTLibrary(),setTimeout((()=>{this.gptManager.loadGPTLibrary()}),3e3)}destroySlot(e){this.gptManager.destroySlot(e)}destroyPHPSlots(){this.gptManager.destroyAllPHPSlots()}loadPWTLibrary(){var e="https://ads.pubmatic.com/AdServer/js/pwt/158861/1887",t=this.getPWTVersionId();t&&t.length>0&&(e+="/"+t),(0,d.LN)(e+"/pwt.js")}getPWTVersionId(){var e=this.config.forcePWTVersionId||"",t=window.location.href;if("experiment"===this.QMeasure.getVariationAndEnroll("UpgradePrebidVersionV2[default,ads]")&&(e="74"),!e&&t.includes("pwtv=")){var i=/pwtv=(.*?)(&|$)/g.exec(t);i&&i.length>=2&&i[1].length>0&&(e=i[1])}return e}init(){this.config.areAdsDisabled||((0,d.Ck)(),this.config.shouldLogAdRequests&&(this._adsPerformanceFirstRenderCallback=(0,d.ZP)("first_ad_render_load_time")),this.gptManager.addKeyValueToConfigObject(s.OW_SCREEN_HEIGHT,(0,xe.C)().toString()),this.gptManager.addKeyValueToConfigObject(s.OW_SCREEN_WIDTH,(0,xe.d)().toString()),this.gptManager.initGPT((()=>this.addPubAdsEventListeners()),this.registerOnEmptyAdCallback))}addPubAdsEventListeners(){var e=this.googletag.pubads();e.addEventListener("slotRenderEnded",this.handleSlotRenderEnded),this.config.shouldLogAdRequests&&(e.addEventListener("slotRequested",this.handleSlotRequestLogging),e.addEventListener("slotRenderEnded",this.handleSlotRenderEndedLogging),e.addEventListener("impressionViewable",this.handleImpressionViewableLogging)),this._adEventLogger.setupWinningBidLogging(this.googletag,this.config.shouldLogWinningBids,this.config.shouldLogWinningBidsToBQ),this._adEventLogger.setupClickTracking(!1,!0)}defineSlotsForRegisteredAds(){Object.keys(this.config.registeredAds).filter((e=>{var t=this.config.registeredAds[e];if(Re()(t,"Ad should have been registered"),t.type===ae.D.VIDEO||!0===t.lazyLoaded)return!1;if(!t.defineSlotImmediately)return!1;var[i]=(0,c.fO)(e,t,{height:(0,xe.C)(),width:(0,xe.d)()});return!(i.length>=2&&0===i[1].length)})).forEach((e=>{var t=this.config.registeredAds[e];Re()(t,"Ad '"+e+"' should have been registered"),this.gptManager.adSlots.defineSlot(e,t)}))}registerCallbackForPHPRenderedAds(){Object.keys(this.config.registeredAds).forEach((e=>{var t=this.config.registeredAds[e];null!=t&&t.isPHPRendered&&this.registerOnEmptyAdCallback(e,this.collapseAdContainer(e))}))}addKV(e,t){this.gptManager.addKV(e,t)}isShowing(e){return this.gptManager.isShowing(e)}getOutOfPageAdsSlotNames(){return this.gptManager.getOutOfPageAdsSlotNames()}resetPageDepthMark(){this.gptManager._hasMarkedPageDepth=!1}getValidPrefetchAds(e){return e.filter((e=>this.shouldrefreshWithPrefetch(e)||this.gptManager.isShowing(e)))}prefetchBids(e,t){void 0===e&&(e=this.gptManager.getAdSlotKeys());var i=this.getValidPrefetchAds(e).reduce(((e,t)=>{var i=this.config.registeredAds[t];return i&&(e[t]=i),e}),{});this.googletag.cmd.push((()=>{this.BidManager&&this.BidManager.fetchAllBids(i,(()=>{null==t||t()}))}))}refreshPrefetchedAds(e,t){void 0===e&&(e=this.gptManager.getAdSlotKeys());var i=this.getValidPrefetchAds(e).reduce(((e,t)=>{var i=this.gptManager.getAdSlot(t),s=this.config.registeredAds[t];return i&&(e[t]=[i,s]),e}),{});this.BidManager&&this.BidManager.applyPrefetchedBidsToSlots(i,(e=>this.gptManager.adSlots.refreshGPTAdSlots(e,(e=>this.configureRefresh(e)),this._adEventLogger)),t)}prefetchAndRefreshAds(e){void 0===e&&(e=this.gptManager.getAdSlotKeys()),this.prefetchBids(e,(()=>this.refreshPrefetchedAds(e,!1)))}updateSlotSizeMapping(e){if(this.gptManager.isShowing(e)&&this.isRegistered(e)){var[t,i]=(0,d.EQ)(),s=(0,c.fO)(e,this.config.registeredAds[e],{height:i,width:t}),a=this.gptManager.getAdSlot(e);null!=a&&a.defineSizeMapping&&a.defineSizeMapping(s)}}displayAd(e){this.gptManager.displayAd(e,(()=>this.enqueueAdsForRefresh([e],re.q.MOUNT_REFRESH)),this.shouldPHPRenderAd)}enqueueAdsForRefresh(e,t){void 0===e&&(e=this.gptManager.getAdSlotKeys()),void 0===t&&(t=re.q.MOUNT_REFRESH);var i=e.filter((e=>{var t,i,s=(0,z.Z)(),a=null!=(t=null==(i=this._lastAdRefreshData[e])?void 0:i.timestamp)?t:0,r=!a||s-a>1e3;return r&&(this._lastAdRefreshData[e]=Object.assign({},this._lastAdRefreshData[e],{timestamp:s})),r}));i.length>0&&(i.forEach((e=>this.gptManager.addKVToSlot(e,s.RESIZE,t===re.q.RESIZE_REFRESH?"1":"0"))),this.refreshAds(i))}refreshAds(e){if(void 0===e&&(e=this.gptManager.getAdSlotKeys()),!this._isAdsDebugPanelOpen){var t=Array.from(new Set(e)),{prefetchAds:i=[],adsToPrefetchAndRefresh:s=[],nonRegisteredAds:a=[]}=g()(t,(e=>this.shouldrefreshWithPrefetch(e)?"prefetchAds":this.gptManager.isShowing(e)?"adsToPrefetchAndRefresh":this.isRegistered(e)?"_":"nonRegisteredAds"));a.forEach((e=>{Te.Z.warn('Ads: Tried to refresh ad for non-existent ad slot "'+e+'"')})),i.length>0&&this.refreshPrefetchedAds(i,!0),s.length>0&&this.prefetchAndRefreshAds(s)}}handleBidFinished(e,t){t.hasRequestStarted||t.bidProcessFinishedApstag&&t.bidProcessFinishedPWT&&(t.hasRequestStarted=!0,t.failsafeTimeout&&clearTimeout(t.failsafeTimeout),this.gptManager.adSlots.refreshGPTAdSlots(e,(e=>this.configureRefresh(e,t.bidProcessTimeoutApstag,t.bidProcessTimeoutPWT)),this._adEventLogger))}getUPRTargetedSlots(e){return e.map((e=>Ae(this.flooringConfig,e,(e=>{var t;return(0,d.RK)(null==(t=this._adEventLogger)?void 0:t._winningBids,e,E.HS.PreAuction)}),this.config.countryCode)))}configureRefresh(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var s=this.config.forcePWTVersionId||"",a=e.map(this.updateAndSetAdRefreshCountKVForAdUnit).filter((e=>void 0!==e)).map((e=>this.setRequestedWithoutBidsKVForSlots(e,t,i)));return this.flooringConfig.partners.adX.enabled&&(a=this.getUPRTargetedSlots(a)),s&&s.length>0&&a.forEach(this.updateAndSetIdentityHubSolutionPWTVersionKVForAdUnit),a}saveBidsResponseForDebug(e){var t;null!=(t=this.config.user)&&t.isAdmin&&window.location.search.includes("ads_debug_tool=1")&&(this.amazonBidsData=[...this.amazonBidsData,...e])}getAPSAdsSlots(e){void 0===e&&(e=Object.keys(this.config.registeredAds));var t=e.filter((e=>this.usesHeaderBidding(e)&&this.gptManager.isShowing(e))),[i,s]=(0,d.EQ)();return t.reduce(((e,t)=>{var a=this.gptManager.getAdSlot(t),r=this.config.registeredAds[t];if(a){a.getTargetingKeys().forEach((e=>{e.startsWith("amzn")&&a.clearTargeting(e)}));var[d,n]=(0,c.fO)(t,r,{height:s,width:i})[0];if(!n.length)return e;e.push({sizes:n,slotID:a.getSlotElementId(),slotName:a.getAdUnitPath(),slotParams:{}})}return e}),[])}getPWTAdsSlots(e){return void 0===e&&(e=Object.keys(this.config.registeredAds)),e.filter((e=>this.config.registeredAds[e].usePWTBidding&&!!this.gptManager.getAdSlot[e])).map((e=>this.gptManager.getAdSlot[e]))}registerExternalBidders(e){e.length>0&&this.OWT&&this.OWT.registerExternalBidders(e)}notifyExternalBiddingComplete(e){e.length>0&&this.OWT&&this.OWT.notifyExternalBiddingComplete(e)}isOutstream(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.isOutstream)}isRegistered(e){return!!this.config.registeredAds[e]}usesHeaderBidding(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.useHeaderBidding)}usesPWTBidding(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.usePWTBidding)}isLazyLoaded(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.lazyLoaded)}allowsPrefetch(e){var t;return!(null==(t=this.config.registeredAds[e])||!t.allowPrefetch)}shouldrefreshWithPrefetch(e){return this.allowsPrefetch(e)&&(this.usesPWTBidding(e)||this.usesHeaderBidding(e))}getAdType(e){var t;if(this.isRegistered(e))return null==(t=this.config.registeredAds[e])?void 0:t.type;Te.Z.warn('Ads: Tried to get ad type for a non-registered ad slot "'+e+'"')}getShowAdHeading(e){var t;return this.isRegistered(e)?!(null==(t=this.config.registeredAds[e])||!t.showAdHeading):(Te.Z.warn('Ads: Tried to get showAdHeading for a non-registered ad slot "'+e+'"'),!1)}setPrebidRequestKVs(e){var t=this.config.keyValues[s.GRADE_LEVELS],i=this.config.keyValues[s.IS_TEACHER];(t||i)&&e.forEach((e=>{e.bids=e.bids.map((e=>("appnexus"===e.bidder&&(e.params.keywords=e.params.keywords||{},e.params.keywords[s.GRADE_LEVELS]=t),"onemobile"===e.bidder&&(e.params.ext=e.params.ext||{},e.params.ext[s.IS_TEACHER]=i),e)))}))}showAdHeadingForNotEmptySlotOrNotQuizletAd(e,t,i,s){var a=this.getAdHeadingContainer(e);if(a){var r=(0,d.e9)(e);this.getShowAdHeading(r)&&!t&&4623761902!==i&&2548271416!==s?(a.style.visibility="visible",this.changeAdHeadingElementsDisplay(a,"block")):(a.style.visibility="hidden",this.changeAdHeadingElementsDisplay(a,"none"))}}changeAdHeadingElementsDisplay(e,t){this.changeChildElementDisplay(e,".AdHeading-removeLink",t),this.changeChildElementDisplay(e,".AdHeading-upgradePrice",t)}changeChildElementDisplay(e,t,i){var s=e.querySelector(t);s&&(s.style.display=i)}hasRegisteredAdsWithHeaderBidding(e){return(Object.values?Object.values(e):Object.getOwnPropertyNames(e).map((t=>e[t]))).some((e=>!0===e.useHeaderBidding))}hasRegisteredAdsWithPWTBidding(e){return(Object.values?Object.values(e):Object.getOwnPropertyNames(e).map((t=>e[t]))).some((e=>!0===e.usePWTBidding))}registerEventCallback(e,t,i){this._eventEmitter.on(e,t,i)}clearEventCallback(e,t){this._eventEmitter.off(e,t)}callEventCallback(e,t,i){this._eventEmitter.emit(e,t,i)}registerOnEmptyAdCallback(e,t){this.registerEventCallback(e,de.T.EmptyAdReceived,t)}clearOnEmptyAdCallback(e){this.clearEventCallback(e,de.T.EmptyAdReceived)}callEmptyAdCallback(e){this.callEventCallback(e,de.T.EmptyAdReceived)}registerOnNativeAdCallback(e,t){this.registerEventCallback(e,de.T.NativeAdReceived,t)}clearOnNativeAdCallback(e){this.clearEventCallback(e,de.T.NativeAdReceived)}callNativeAdCallback(e){this.callEventCallback(e,de.T.NativeAdReceived)}clearOnAdViewableEventCallback(e){this.clearEventCallback(e,de.T.AdIsViewable)}registerOnWinningEvent(e,t){this.registerEventCallback(e,de.T.WinningEvent,t)}clearOnWinningEventCallback(e){this.clearEventCallback(e,de.T.WinningEvent)}callWinningEventCallback(e,t){this.callEventCallback(e,de.T.WinningEvent,t)}addResizeListenersForAd(e){this.gptManager.addResizeListenersForAd(e)}getPageAdsDataForReport(){return this.googletag.pubads().getSlots().reduce(((e,t)=>{var i=t.getSlotElementId();if(e[i])return e;var s=this.getAdResponse(t),a=this.getTargetingKeys(t),r=this.getWinningBidDataForReport(i),d=this.getDfpQueryId(i),n=Object.assign({},r,d,s,{kvInfo:{}});if(a.length>0){var o=a.reduce(((e,i)=>(e[i]=this.getTargeting(t,i),e)),{});n.kvInfo=o}return e[i]=n,e}),{})}getAdResponse(e){return null==e.getResponseInformation?void 0:e.getResponseInformation()}getTargetingKeys(e){return null==e.getTargetingKeys?void 0:e.getTargetingKeys()}getTargeting(e,t){return null==e.getTargeting?void 0:e.getTargeting(t)}sendAdsReport(){var e=this.getPageAdsDataForReport();if(Object.keys(e).length<1)alert((0,Se.Z)("ads_report.no_ads"));else{var[t,i]=(0,d.EQ)(),s={adsData:e,kvData:Object.entries(this.config.keyValues).sort(ne.h),pageData:{url:window.location.href,pageWidth:t,pageHeight:i}};confirm((0,Se.Z)("ads_report.confirmation_text"))&&(0,De.cZ)("/ads/ads-report",s).then((e=>{if(e.success)alert((0,Se.Z)("ads_report.feedback_message"));else if(!e.success){var t=(0,Se.Z)("ads_report.feedback_message_error");alert(t+"\n"+e.error)}}))}}toggleAdsDebugMenu(){this._isAdsDebugPanelOpen?this.closeAdsDebugMenu():this.openAdsDebugMenu()}closeAdsDebugMenu(){var e=document.getElementById(ke);e&&(this._isAdsDebugPanelOpen=!1,(0,Oe.unmountComponentAtNode)(e),e.remove())}openAdsDebugMenu(){var e=this.getPageAdsDataForReport();if(document.getElementsByClassName("AdminDebugBar-inner")[0]&&Object.keys(e).length>0){this._isAdsDebugPanelOpen=!0;var t=document.getElementsByClassName("AdminDebugBar-inner")[0],i=t.parentNode,s=document.createElement("div");s.id=ke,i&&(i.insertBefore(s,t),ue(s,{keyValues:this.config.keyValues,pageAdsData:e,bidReportStartTime:this.bidReportStartTime,amazonBidsData:this.amazonBidsData}))}}getDfpQueryId(e){var t=document.getElementById(e);return t?{dfpQueryId:t.dataset.googleQueryId}:{}}getWinningBidDataForReport(e){var t=this._adEventLogger.getWinningBidsForSlot(e);return t&&t.length?{bidPayload:t.map((e=>["dfp_adv","bidder","dfp_size"].reduce(((t,i)=>e[i]?Object.assign({},t,{[i]:e[i]}):t),{})))}:{}}getAdHeadingContainer(e){return document.getElementById((0,d.aV)(e))}getAdsSizesFromCustomMapping(e){if(!this.isRegistered(e))return[];var[t,i]=(0,d.EQ)(),s=this.config.registeredAds[e],[a,r]=(0,c.fO)(e,s,{height:i,width:t})[0];return r}getIsBCSEnabled(){var e;return null!=(e=this.config.isBCSEnabled)&&e}shouldUseSafeframe(e){return"teads"!==e.bidder&&("triplelift"!==e.bidder||"tlx"!==e.tl_source)}collapseAdContainer(e){return()=>{var t=document.getElementById(e);t&&(t.style.display="none")}}}var je=(e,t,i,s,a)=>{var r=(0,d.ZP)("constructor_load_time"),n=((e,t,i,s)=>"experiment"===i.getVariationAndEnroll("GPTManagerRefactor[default,ads]")?new Ne(e,t,i,s):new Le(e,t,i,s))(e,Object.assign({},t,i),s,a),o=t.shouldLogAdRequests;o&&r();var l=(0,d.ZP)("init_load_time");return n.init(),o&&l(),n},Ve=i("./app/j/ads/promises.ts");class Fe extends le.Component{componentDidMount(){var{id:e}=this.props;(0,Ce.Z)()||(0,Ve.L)().then((t=>{t.displayOutOfPageAd(e)}))}render(){return le.createElement("div",{id:(0,d.tI)(this.props.id)})}}function He(){var[e,t]=(0,le.useState)([]);return(0,le.useEffect)((()=>{(0,Ce.Z)()||(0,Ve.L)().then((e=>{t(e.getOutOfPageAdsSlotNames())}))}),[]),le.createElement("div",{style:{display:"none"}},e.map((e=>le.createElement(Fe,{id:e,key:e}))))}var Ze=le.memo(He);var Ge=JSON.parse('{"kT":"qz-winning-bids","CK":"qz-clicks-est","hz":2000,"ZD":"https://1b20ai7k0i.quizlet.com/logadevent/v3","J9":15000}'),ze={"1qq9log":"AppNexus","3wnojk":"DMX",f07fuo:"Index Exchange","9gfk74":"Magnite",r7pkow:"OpenX","16r2u4g":"PubMatic",vnj2tc:"Sovrn","1mag3k0":"TripleLift","8ch6o0":"UnrulyX_SSP_APS","1oqxhc":"Verizon Media Group"},Ke=(i("./node_modules/core-js/modules/es.parse-float.js"),i("./app/j/utils/log-event.ts")),Ue=i("./app/j/utils/unix-timestamp.ts"),Qe=(e,t)=>(null!==e[t]&&void 0!==e[t]&&(e[t]=Boolean(e[t])),e),qe=(e,t)=>{var i=(e=>{var t;return(null!=(t=e.bids)?t:[]).map((t=>Object.assign({aid:e.aid},t)))})(t),s=(e=>{var t,i=Object.assign({},e);if(delete i.created_at,delete i.bids,e.chu){var s=parseFloat(e.chu);Number.isNaN(s)||(i.chu=s)}return Qe(i,"cpm_est"),Qe(i,"unfilled"),null!=(t=i.tests)&&t.length&&(i.tests=JSON.stringify(i.tests)),i})(t);(0,Ke.K)(e,"ad_slot_winning_bid_events",(0,d.t_)(s),{includeUserDetails:!0}),i.forEach((t=>{(0,Ke.K)(e,"ad_slot_received_bid_events",(0,d.t_)(t),{includeUserDetails:!0})}))},Xe=i("./node_modules/lodash/debounce.js"),Ye=i.n(Xe),Je={[Ge.kT]:[],[Ge.CK]:[]},$e=e=>{var t=[...Je[e]];Je[e]=[],((e,t)=>{var i;if(0!==t.length){var s={stream_name:e,events:t},a=JSON.stringify(s,((e,t)=>{if(null!==t)return t})),r=e=>{var t=new XMLHttpRequest;t.open("POST",Ge.ZD),t.send(e)};if(null!=(i=navigator)&&i.sendBeacon)try{navigator.sendBeacon(Ge.ZD,a)}catch(d){r(a)}else r(a)}})(e,t)},et=(e,t)=>{e in Je||(Je[e]=[]),Je[e].push(t),Ye()((()=>{$e(e)}),Ge.hz)()};var tt=i("./app/j/utils/log-page-action.ts");function it(){(0,Ce.Z)()&&((0,tt.Z)("adblocker_enabled"),function(){for(var e=window.document.querySelectorAll(".AdHeading"),t=0;t<e.length;t++){var i=e[t];i.parentNode&&i.parentNode.removeChild(i)}}())}var st=i("./app/j/ads/components/Ad.tsx"),at=i("./app/j/utils/readReactTarget.ts");var rt=i("./app/j/compatibility/logger/getLoggerConfig.ts"),dt=i("./node_modules/domready/ready.js"),nt=i.n(dt),ot=i("./app/j/global/Quizlet.ts");!function(e){e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[]}(r.Z);var lt,gt={actionString:ot.Z.actionString,countryCode:ot.Z.countryCode,deviceCategory:ot.Z.deviceCategory,shouldLoadPWT:!0,user:ot.Z.user},ht=new class{constructor(e){this._auctionIds={},this._receivedBids={},this._winningBids={},this._winningAids=[],this._onWinningEventCallback=[],this._onAdViewableCallback=[],this._onGPTResponseTimeCallback={},this.config=e}addLogInfo(e){this.browserData=e.browserData,this.deviceCategory=e.deviceCategory,this.keyValues=e.keyValues,this.userId=e.userId}addOnAdViewableCallback(e){this._onAdViewableCallback.push(e)}addOnWinningEventCallback(e){this._onWinningEventCallback.push(e)}setupWinningBidLogging(e,t,i){var s=e.pubads();s.addEventListener("slotRenderEnded",(e=>{var s,a=this._parseGPTSlotRenderEvent(e),r=this.getGPTResponseTime(null!=(s=a.ele_id)?s:"");r&&(a.gpt_resp_time=Math.round(r)),this._storeWinningBid(a),t&&et(Ge.kT,a),i&&qe(this.config,a),this._triggerOnWinningEvent(a)})),s.addEventListener("impressionViewable",(e=>{var t,s,a,r=e.slot.getSlotElementId(),d=null!=(t=this._winningBids[r])?t:{};if(null!=d&&d.length){var n,o=this._winningBids[r][d.length-1];i&&null!=(n=o.aid)&&n.length&&(s=this.config,a=o.aid,(0,Ke.K)(s,"ad_slot_viewable_events",{aid:a,client_timestamp:(0,Ue.vJ)()},{sendImmediate:!0})),this._triggerOnAdViewable(o)}}))}setupClickTracking(e,t){window.addEventListener("blur",(()=>{setTimeout((()=>{var i,s,a,r=null==(i=document.activeElement)||null==(s=i.parentElement)||null==(a=s.parentElement)?void 0:a.id;if(r){var d=this._winningBids[r];if(d)if(d.length<1)Math.random()<=.01&&Te.Z.warn("Ads: Click Estimation: No matching winning event stored");else{var n,o,l=d[d.length-1];if(l.aid)e&&et(Ge.CK,Object.assign({},l,{created_at:(0,z.Z)()})),t&&(n=this.config,o=l.aid,(0,Ke.K)(n,"ad_slot_click_events",{aid:o,client_timestamp:(0,Ue.vJ)()},{sendImmediate:!0}));else Math.random()<=.01&&Te.Z.warn("Ads: Click Estimation: No aid prop on winning event")}}}),500)}))}markGPTRequestSent(e){var t=(e,t,i)=>i&&"gpt_response_time"===e?t:null;e.forEach((e=>{this._onGPTResponseTimeCallback[e]=(0,d.ZP)("gpt_response_time",e,t)}))}getGPTResponseTime(e){if(e.startsWith("php-")){var t,i,s,a,r=e+"-gpt-start";return null!=(t=null==(i=window)||null==(s=i.performance)||null==(a=s.measure(e+"-gpt-measure",r))?void 0:a.duration)?t:null}return this._onGPTResponseTimeCallback[e]?this._onGPTResponseTimeCallback[e]():null}getAids(){return this._winningAids}logOpenWrapBid(e){var t;if(!(e.cpm<=0)){var i=this._getCurrentAuctionId(e.adUnitCode);i in this._receivedBids||(this._receivedBids[i]=[]);var s={bidder:e.bidder,cpm:e.cpm,resp_time:e.timeToRespond,size:e.size};e.bidder in I||(s.req_flr=e._requestFloor,s.req_flr_r=e._requestFloorRespected);var a=(null==(t=e.adserverTargeting)?void 0:t.hb_adomain)||"";a.length>0&&(s.domain=a),this._receivedBids[i].push(s)}}getWinningBidsForSlot(e){return this._winningBids[e]}resetAuctionIds(e){e.filter((e=>e in this._auctionIds)).forEach((e=>delete this._auctionIds[e]))}_parseGPTSlotRenderEvent(e){var t,i=e.slot.getSlotElementId(),a=e.isEmpty,r=(t=e.size,Array.isArray(t)&&2===t.length?t[0]+"x"+t[1]:null),n=e.slot.getTargeting(s.AD_REFRESH_COUNT)[0],o=e.slot.getTargeting(ce.CUSTOM_HARD_UPR),l=(new Be.Z).getItem(ie.Vj),g=this.browserData,h=this._getCurrentAuctionId(i),u=[...this._receivedBids[h]||[]],c={aid:h,bids:u.length?u:null,bidder:null,bn:(null==g?void 0:g.browserName)||null,bv:(null==g?void 0:g.browserVersion)||null,chu:o.length>0?o[0]:null,dc:this.deviceCategory,cpm:null,cpm_est:null,created_at:(0,z.Z)(),dfp_adv:null,dfp_size:r,ele_id:i,geoc:(null==g?void 0:g.countryCode)||null,geom:(null==g?void 0:g.regionCode)||null,lid:e.lineItemId?e.lineItemId.toString():null,osn:(null==g?void 0:g.osName)||null,osv:(null==g?void 0:g.osVersion)||null,pd:l?parseInt(l,10):null,pmp:!1,ref:parseInt(n,10)||null,tests:this._getEnrolledTests(),unfilled:a?E.G9.UNFILLED:E.G9.FILLED,uid:this.userId,url:window.location.href};if(delete this._receivedBids[h],!a){var p=(0,d.Lg)(""+e.advertiserId)||""+e.advertiserId;c=Object.assign(c,{dfp_adv:p});var f=this._capturePositionalData(i);c=Object.assign(c,f);var m=(0,d.Mk)(i,!0)[0]||{bidder:null,netEcpm:0},_=!(!m.dealID||void 0===m.dealID);if("PubMatic"===p)c=Object.assign(c,{bidder:m.adapterID,cpm:m.netEcpm,cpm_est:E.GO.EXACT,pmp:_});else{var A=m.netEcpm+.01;if(A=Math.round(100*A)/100,c=Object.assign(c,{cpm:A,cpm_est:E.GO.ESTIMATED}),"Amazon/A9"===p){var v=e.slot.getTargeting("amzniid_sp")[0],T=!(!v||void 0===v);c.bidder=this._getTAMBidder(e.slot),c.pmp=T}}}return c}_getTAMBidder(e){var t=e.getTargeting("amznp")[0];return t?ze[t]:"amazon"}_storeWinningBid(e){e.ele_id&&(this._winningBids[e.ele_id]||(this._winningBids[e.ele_id]=[]),this._winningBids[e.ele_id].push(Object.assign({},e)),e.aid&&this._winningAids.push(e.aid))}_getEnrolledTests(){return Object.entries(this.keyValues).filter((e=>e[0].startsWith("adexp"))).map((e=>e[0]+"_"+e[1]))}_getCurrentAuctionId(e){var t=te.getCurrentAid(e);return null!=t&&t.length?t:((!(e in this._auctionIds)||(0,z.Z)()-this._auctionIds[e].created_at>Ge.J9)&&(this._auctionIds[e]={aid:(0,ee.Z)(),created_at:(0,z.Z)()}),this._auctionIds[e].aid)}_capturePositionalData(e){if(null==e||!e.length)return{};var t=(0,xe.C)(),i=(0,xe.d)(),s=null,a=null,r=null,d=document.getElementById(e),n=null==d?void 0:d.getBoundingClientRect();return n?(a=Math.round(n.left+window.scrollX),r=Math.round(n.top+window.scrollY),s=(null==n?void 0:n.top)>=0&&(null==n?void 0:n.left)>=0&&(null==n?void 0:n.bottom)<=t&&(null==n?void 0:n.right)<=i):Math.random()<=1e-4&&Te.Z.warn("Ads (0.01%): AdEventLogger could not grab positional data",{eleId:e,viewportHeight:t,viewportWidth:i}),{inV:s,posX:a,posY:r,vH:Math.round(t),vW:Math.round(i)}}_triggerOnAdViewable(e){this._onAdViewableCallback.length&&this._onAdViewableCallback.forEach((t=>t(e)))}_triggerOnWinningEvent(e){this._onWinningEventCallback.length&&this._onWinningEventCallback.forEach((t=>t(e)))}}((0,rt.c)());ot.Z.QAdManager=je(r.Z.googletag,ot.Z.adConfig,gt,a.Z,ht),QLoad("Quizlet.Ads"),nt()((()=>{it(),ot.Z.QAdManager.shouldRenderOutOfPageSlots()&&(0,at.Z)("OutOfPageAds",!1).then((e=>{var{target:t}=e;(0,ge.Z)(le.createElement(Ze,null),t)}))})),lt=ot.Z.adConfig.registeredAds,Object.keys(lt).forEach((e=>{lt[e].isPHPRendered&&(0,at.Z)("SiteAd"+e).then((e=>{var{target:t,data:i}=e;return(0,ge.Z)(le.createElement(st.Z,i),t)}))}))},"./app/j/ads/utils/adsDebugToolUtils.ts":(e,t,i)=>{"use strict";i.d(t,{h:()=>s,I:()=>a});i("./node_modules/core-js/modules/es.array.iterator.js"),i("./node_modules/core-js/modules/web.dom-collections.iterator.js"),i("./node_modules/core-js/modules/es.array.reduce.js"),i("./node_modules/core-js/modules/es.array.sort.js"),i("./node_modules/core-js/modules/es.object.entries.js");var s=(e,t)=>{var[i]=e,[s]=t;return i>s?1:s>i?-1:0},a=function(e){return void 0===e&&(e={}),Object.entries(e).sort(s).reduce(((e,t)=>{var[i,s]=t;return""+e+i+": "+s+", "}),"")}},"./app/j/ads/utils/screenSizes.ts":(e,t,i)=>{"use strict";i.d(t,{r:()=>r});var s=i("./app/j/constants/BreakpointConstants.ts"),a=e=>(0,s.hQ)(e,1)||0,r={veryLarge:[a("xl"),0],largeAndVeryTall:[a("l"),910],largeAndTall:[a("l"),750],large:[a("l"),0],mediumAndVeryTall:[a("m"),910],medium:[a("m"),0],small:[a("s"),0],verySmall:[a("xs"),0],tiny:[a("xxs"),300],remaining:[0,0]}},"./app/j/config/constants.ts":(e,t,i)=>{"use strict";i.d(t,{I3:()=>s,HW:()=>a,cD:()=>r,nw:()=>d,oA:()=>n}),t.ZP={EMAIL_MAX_LENGTH:127,fallbackTimeZone:"America/Los_Angeles",IMPRESSED_PERCENTAGE_THRESHOLD:10,MAX_TERMS_FOR_PRINT:500,NETWORK_CODE:"6396803",ONE_TRUST_KEY:"c477f242-a93f-4a62-9585-05c0f39fc61d",ONE_TRUST_TEST_KEY:"cdb8b302-c332-452d-aa57-157909d81d26-test",TEACHER_MAX_AGE:80,TEACHER_MIN_AGE:20,SEARCH_QUERY_MAX_CHARS:100};var s=500,a="6396803",r=80,d=20,n=100},"./node_modules/lodash/_baseNth.js":(e,t,i)=>{var s=i("./node_modules/lodash/_isIndex.js");e.exports=function(e,t){var i=e.length;if(i)return s(t+=t<0?i:0,i)?e[t]:void 0}},"./node_modules/lodash/defaultTo.js":e=>{e.exports=function(e,t){return null==e||e!=e?t:e}},"./node_modules/lodash/groupBy.js":(e,t,i)=>{var s=i("./node_modules/lodash/_baseAssignValue.js"),a=i("./node_modules/lodash/_createAggregator.js"),r=Object.prototype.hasOwnProperty,d=a((function(e,t,i){r.call(e,i)?e[i].push(t):s(e,i,[t])}));e.exports=d},"./node_modules/lodash/nth.js":(e,t,i)=>{var s=i("./node_modules/lodash/_baseNth.js"),a=i("./node_modules/lodash/toInteger.js");e.exports=function(e,t){return e&&e.length?s(e,a(t)):void 0}}},e=>{e.O(0,["react","common"],(()=>{return t="./app/j/ads/ads.entry.tsx",e(e.s=t);var t}));e.O()}]);